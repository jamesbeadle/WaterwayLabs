import{t as _,a as m,c as U}from"../chunks/hWcEUt93.js";import{aB as ge,z as ne,x as E,y as he,aF as J,D as _e,F as be,G as we,I as Z,U as Q,aj as D,al as X,m as z,A as R,ah as ye,C as ie,a5 as $,a4 as ee,aG as te,W as xe,J as ae,B as F,aD as Ae,E as Se,N as Te,ap as Ee,p as P,c as v,r as p,s as h,t as Le,a as O,f as L,g as I,b as B,a1 as G,aH as Ie,aI as ke}from"../chunks/DnLl-0l0.js";import{d as q,s as Ne,e as Ce}from"../chunks/BxO3wRfq.js";import{i as k}from"../chunks/CPcoeCB7.js";import{t as le,f as Me,M as Re,S as Be,a as Pe}from"../chunks/CfcOVsSL.js";import{o as W}from"../chunks/M4VF2T6N.js";import{p as se}from"../chunks/CYkOTia4.js";import{_ as Oe}from"../chunks/CmsKOCeN.js";import{s as We,a as A,f as De,g as Fe}from"../chunks/BESUPr1q.js";import{d as je,w as ce}from"../chunks/C9siDptk.js";import{t as N}from"../chunks/BRnfJphh.js";import{L as re}from"../chunks/BMvRmrPI.js";import"../chunks/BvhvmDpb.js";import{A as He,a as V,e as Ue}from"../chunks/KE7I8jds.js";import{a as ze,s as Ge}from"../chunks/Beh36NY6.js";import{s as Ve}from"../chunks/UlGLkc-r.js";import{i as qe}from"../chunks/D4C4i4J1.js";import{A as Ye}from"../chunks/DO6DkbAt.js";import{i as Ke}from"../chunks/2mQVG6z7.js";const j=0,M=1,H=2;function Je(t,e,a,s,n){E&&he();var o=t,c=ge(),u=xe,i=Q,l,r,f,w=(c?X:z)(void 0),C=(c?X:z)(void 0),g=!1;function y(d,b){g=!0,b&&($(T),ee(T),te(u));try{d===j&&a&&(l?ae(l):l=R(()=>a(o))),d===M&&s&&(r?ae(r):r=R(()=>s(o,w))),d!==j&&l&&F(l,()=>l=null),d!==M&&r&&F(r,()=>r=null),d!==H&&f&&F(f,()=>f=null)}finally{b&&(te(null),ee(null),$(null),Ae())}}var T=ne(()=>{if(i===(i=e()))return;let d=E&&J(i)===(o.data===_e);if(d&&(o=be(),we(o),Z(!1),d=!0),J(i)){var b=i;g=!1,b.then(S=>{b===i&&(D(w,S),y(M,!0))},S=>{if(b===i)throw D(C,S),y(H,!0),C.v}),E?a&&(l=R(()=>a(o))):ye(()=>{g||y(j,!0)})}else D(w,i),y(M,!1);return d&&Z(!0),()=>i=Q});E&&(o=ie)}function Ze(t,e,...a){var s=t,n=Te,o;ne(()=>{n!==(n=e())&&(o&&(Ee(o),o=null),o=R(()=>n(s,...a)))},Se),E&&(s=ie)}const Qe=!1,Kt=Object.freeze(Object.defineProperty({__proto__:null,ssr:Qe},Symbol.toStringTag,{value:"Module"})),Xe=t=>{if(!$e()){window.location.replace(t);return}history.replaceState({},"",t)},$e=()=>window.history!==void 0&&"pushState"in window.history&&typeof window.history.pushState<"u",et=()=>{const{subscribe:t,set:e}=ce(void 0);return{subscribe:t,start(){e({spinner:!0,close:!1})},show(){e({spinner:!0,close:!0})},stop(){e(void 0)}}},ue=et(),tt=()=>{const{subscribe:t,set:e}=ce(!1);return{subscribe:t,start(){e(!0)},stop(){e(!1)}}},at=tt();je([ue,at],([t,e])=>We(t)||e);const st=async()=>await rt({msg:{message:"You have been logged out because your session has expired.",type:"info"},clearStorages:!1}),rt=async({msg:t=void 0,clearStorages:e=!0})=>{ue.start(),e&&await Promise.all([console.error("Store clear not implemented")]),await A.signOut(),t&&N.addToast(t),window.location.reload()},fe="msg",de="level",ot=()=>{const t=new URLSearchParams(window.location.search),e=t.get(fe);if(De(e))return;const a=t.get(de)??"info";N.addToast({message:e,type:a}),nt()},nt=()=>{const t=new URL(window.location.href);t.searchParams.delete(fe),t.searchParams.delete(de),Xe(t)},it=async()=>{const t=await Oe(()=>import("../chunks/iBk8YylV.js"),[],import.meta.url),e=new t.default;return e.onmessage=async({data:a})=>{const{msg:s,data:n}=a;switch(s){case"signOutIdleTimer":await st();return;case"delegationRemainingTime":Fe.set(n?.authRemainingTime);return}},{syncAuthIdle:a=>{if(!a.identity){e.postMessage({msg:"stopIdleTimer"});return}e.postMessage({msg:"startIdleTimer"})}}};var lt={BACKEND_CANISTER_ID:"rbqtt-7yaaa-aaaal-qcndq-cai"};class oe{constructor(){}async getAppStatus(){const a=await(await He.createActor(qe,lt.BACKEND_CANISTER_ID)).getAppStatus();if(V(a))throw new Error("Failed to get app status");return a.ok}}function ct(){async function t(){const a=await new oe().getAppStatus();if(V(a))throw new Error("Error fetching app status");let s=a;if(!localStorage.getItem("version")){localStorage.setItem("version",s.version);return}s.version!==localStorage.getItem("version")&&N.addToast({message:`Waterway Labs V${s.version} is now available. Click here to reload:`,type:"frontend-update"})}async function e(){const a=await new oe().getAppStatus();if(V(a))throw new Error("Error fetching app status");let s=a;localStorage.setItem("version",s.version),window.location.replace(`${window.location.pathname}?v=${s.version}`)}return{checkServerVersion:t,updateFrontend:e}}const ut=ct();function ft(){ut.updateFrontend()}var dt=_('<button class="p-1 transition-colors border border-white rounded-full group hover:bg-white hover:text-black flex flex-row items-center"><span class="flex-1 text-xs semi-bold tracking-wide text-center lg:px-4">UPDATE SITE</span> <span class="w-8 h-8 flex items-center justify-center"><!></span></button>'),mt=_('<div><span> </span> <!> <button class="font-bold ml-4">&times;</button></div>');function vt(t,e){P(e,!0),W(()=>{e.toast.duration&&e.toast.duration>0&&setTimeout(a,e.toast.duration)});function a(){N.removeToast(e.toast.id)}var s=mt(),n=v(s),o=v(n,!0);p(n);var c=h(n,2);{var u=l=>{var r=dt();r.__click=[ft];var f=h(v(r),2),w=v(f);Ye(w,{fill:"#272727",className:"w-8 h-8"}),p(f),p(r),m(l,r)};k(c,l=>{e.toast.type=="frontend-update"&&l(u)})}var i=h(c,2);i.__click=a,p(s),Le(()=>{Ve(s,1,`fixed top-0 left-0 right-0 z-[9999] p-4 text-black shadow-md flex justify-between items-center bg-${e.toast.type}`),Ne(o,e.toast.message)}),m(t,s),O()}q(["click"]);var pt=_("<div><!></div>");function gt(t){const[e,a]=ze(),s=()=>Ge(N,"$toasts",e);var n=U(),o=L(n);Ue(o,1,s,c=>c.id,(c,u)=>{var i=pt(),l=v(i);vt(l,{get toast(){return I(u)}}),p(i),le(1,i,()=>Me,()=>({y:20,duration:200})),m(c,i)}),m(t,n),a()}function ht(t,e){t.stopPropagation(),e.toggleMenu()}var _t=_('<header class="z-30 flex items-center justify-between h-16 px-4 text-white shadow-md bg-BrandGray/90"><a href="/" class="flex items-center space-x-2 transition-transform hover:scale-105"><img src="logo.png" class="h-5" alt="Waterway Labs Logo"> <span class="lg:text-sm xl:text-base">WATERWAY <span class="exLight">LABS</span></span></a> <div class="flex items-center gap-4"><button class="p-2 text-white transition-colors rounded-md bg-BrandBlueComp hover:bg-BrandBlue" aria-label="Toggle menu"><!></button></div></header>');function bt(t,e){P(e,!0);let a=G(!1);W(async()=>{try{A.subscribe(u=>{B(a,u.identity!==null&&u.identity!==void 0,!0)})}catch(u){console.error("Error fetching homepage data:",u)}finally{}});var s=_t(),n=h(v(s),2),o=v(n);o.__click=[ht,e];var c=v(o);Re(c,{className:"w-6 h-6",fill:"white"}),p(o),p(n),p(s),m(t,s),O()}q(["click"]);function wt(){let t={domain:"https://identity.ic0.app"};A.signIn(t)}function yt(){A.signOut()}var xt=_("<button>LET'S CONNECT</button>"),At=_("<button>LET'S CONNECT</button>"),St=_('<footer class="relative py-8 overflow-hidden bg-BrandGray"><div class="absolute ellipse-1"></div> <div class="absolute ellipse-2"></div> <div class="relative z-10"><div class="flex flex-col px-6 lg:px-12 lg:flex-row lg:items-center lg:justify-between"><div class="flex items-center mb-6 lg:mb-0"><a href="/" class="flex items-center"><img src="logo.png" class="h-5 lg:h-4" alt="Waterway Labs Logo"> <span class="ml-2 tracking-wide"><span class="text-white">WATERWAY</span> <span class="text-white exLight">LABS</span></span></a></div> <div class="flex flex-col text-sm uppercase exLight lg:mb-0 lg:flex-row"><a href="/" class="mb-4 lg:mb-0 lg:mx-4 hover:text-blue-400">Products</a> <a href="/about" class="mb-4 lg:mb-0 lg:mx-4 hover:text-blue-400">About Us</a> <a href="/team" class="mb-4 lg:mb-0 lg:mx-4 hover:text-blue-400">The Team</a></div></div> <hr class="my-6 border-t-2 border-[#4E4E4E] mx-6 lg:mx-auto lg:w-[1450px]"> <div class="flex flex-col px-6 lg:px-12 lg:flex-row lg:items-center lg:justify-between"><div class="mb-4 lg:mb-0"><!></div> <div class="flex flex-col text-sm uppercase exLight lg:flex-row "><a href="https://github.com" target="_blank" class="mb-4 lg:mb-0 lg:mx-2 hover:text-blue-400">GitHub</a> <a href="https://twitter.com" target="_blank" class="mb-4 lg:mb-0 lg:mx-2 hover:text-blue-400">Twitter</a></div></div></div></footer>');function Tt(t,e){P(e,!1);let a=z(!1);W(async()=>{try{A.subscribe(r=>{B(a,r.identity!==null&&r.identity!==void 0)})}catch(r){console.error("Error fetching homepage data:",r)}finally{}}),Ke();var s=St(),n=h(v(s),4),o=h(v(n),4),c=v(o),u=v(c);{var i=r=>{var f=xt();f.__click=[yt],m(r,f)},l=r=>{var f=At();f.__click=[wt],m(r,f)};k(u,r=>{I(a)?r(i):r(l,!1)})}p(c),Ie(2),p(o),p(n),p(s),m(t,s),O()}q(["click"]);var Et=_("<!> <!>",1),Lt=_("<!> <!> <!> <!>",1),It=_("<div><!></div>");function Jt(t,e){P(e,!0);let a=G(!0),s=G(!1);function n(){B(s,!I(s))}W(async()=>{document.querySelector("#app-spinner")?.remove(),await it(),B(a,!1)});const o=async()=>{await A.sync(),ot()};var c=U();Ce("storage",ke,function(...i){A.sync?.apply(this,i)});var u=L(c);Je(u,o,i=>{var l=It(),r=v(l);re(r),p(l),le(1,l,()=>Pe),m(i,l)},(i,l)=>{var r=U(),f=L(r);{var w=g=>{re(g)},C=g=>{var y=Lt(),T=L(y);gt(T);var d=h(T,2);{var b=x=>{var Y=Et(),K=L(Y);bt(K,{toggleMenu:n});var pe=h(K,2);Be(pe,{get isMenuOpen(){return I(s)},toggleMenu:n}),m(x,Y)};k(d,x=>{se.url.pathname!="/"&&x(b)})}var S=h(d,2);Ze(S,()=>e.children);var me=h(S,2);{var ve=x=>{Tt(x,{})};k(me,x=>{se.url.pathname!="/"&&x(ve)})}m(g,y)};k(f,g=>{I(a)?g(w):g(C,!1)})}m(i,r)}),m(t,c),O()}export{Jt as component,Kt as universal};
