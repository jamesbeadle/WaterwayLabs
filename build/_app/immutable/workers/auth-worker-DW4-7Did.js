(function(){"use strict";BigInt(60*60*1e3*1e3*1e3*24*14);const hs=1e3;var we=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ls(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ds={},Fe={};Fe.byteLength=ys,Fe.toByteArray=xs,Fe.fromByteArray=Es;for(var zt=[],Gt=[],ps=typeof Uint8Array<"u"?Uint8Array:Array,pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ye=0,ws=pr.length;ye<ws;++ye)zt[ye]=pr[ye],Gt[pr.charCodeAt(ye)]=ye;Gt[45]=62,Gt[95]=63;function mn(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function ys(e){var t=mn(e),r=t[0],n=t[1];return(r+n)*3/4-n}function gs(e,t,r){return(t+r)*3/4-r}function xs(e){var t,r=mn(e),n=r[0],u=r[1],d=new ps(gs(e,n,u)),y=0,c=u>0?n-4:n,b;for(b=0;b<c;b+=4)t=Gt[e.charCodeAt(b)]<<18|Gt[e.charCodeAt(b+1)]<<12|Gt[e.charCodeAt(b+2)]<<6|Gt[e.charCodeAt(b+3)],d[y++]=t>>16&255,d[y++]=t>>8&255,d[y++]=t&255;return u===2&&(t=Gt[e.charCodeAt(b)]<<2|Gt[e.charCodeAt(b+1)]>>4,d[y++]=t&255),u===1&&(t=Gt[e.charCodeAt(b)]<<10|Gt[e.charCodeAt(b+1)]<<4|Gt[e.charCodeAt(b+2)]>>2,d[y++]=t>>8&255,d[y++]=t&255),d}function ms(e){return zt[e>>18&63]+zt[e>>12&63]+zt[e>>6&63]+zt[e&63]}function bs(e,t,r){for(var n,u=[],d=t;d<r;d+=3)n=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(e[d+2]&255),u.push(ms(n));return u.join("")}function Es(e){for(var t,r=e.length,n=r%3,u=[],d=16383,y=0,c=r-n;y<c;y+=d)u.push(bs(e,y,y+d>c?c:y+d));return n===1?(t=e[r-1],u.push(zt[t>>2]+zt[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],u.push(zt[t>>10]+zt[t>>4&63]+zt[t<<2&63]+"=")),u.join("")}var ve={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ve.read=function(e,t,r,n,u){var d,y,c=u*8-n-1,b=(1<<c)-1,B=b>>1,N=-7,O=r?u-1:0,D=r?-1:1,M=e[t+O];for(O+=D,d=M&(1<<-N)-1,M>>=-N,N+=c;N>0;d=d*256+e[t+O],O+=D,N-=8);for(y=d&(1<<-N)-1,d>>=-N,N+=n;N>0;y=y*256+e[t+O],O+=D,N-=8);if(d===0)d=1-B;else{if(d===b)return y?NaN:(M?-1:1)*(1/0);y=y+Math.pow(2,n),d=d-B}return(M?-1:1)*y*Math.pow(2,d-n)},ve.write=function(e,t,r,n,u,d){var y,c,b,B=d*8-u-1,N=(1<<B)-1,O=N>>1,D=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=n?0:d-1,j=n?1:-1,J=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,y=N):(y=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-y))<1&&(y--,b*=2),y+O>=1?t+=D/b:t+=D*Math.pow(2,1-O),t*b>=2&&(y++,b/=2),y+O>=N?(c=0,y=N):y+O>=1?(c=(t*b-1)*Math.pow(2,u),y=y+O):(c=t*Math.pow(2,O-1)*Math.pow(2,u),y=0));u>=8;e[r+M]=c&255,M+=j,c/=256,u-=8);for(y=y<<u|c,B+=u;B>0;e[r+M]=y&255,M+=j,y/=256,B-=8);e[r+M-j]|=J*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Fe,r=ve,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=ut,e.INSPECT_MAX_BYTES=50;const u=2147483647;e.kMaxLength=u,c.TYPED_ARRAY_SUPPORT=d(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const h=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(h,o),h.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function y(h){if(h>u)throw new RangeError('The value "'+h+'" is invalid for option "size"');const o=new Uint8Array(h);return Object.setPrototypeOf(o,c.prototype),o}function c(h,o,a){if(typeof h=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(h)}return b(h,o,a)}c.poolSize=8192;function b(h,o,a){if(typeof h=="string")return D(h,o);if(ArrayBuffer.isView(h))return j(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(F(h,ArrayBuffer)||h&&F(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(F(h,SharedArrayBuffer)||h&&F(h.buffer,SharedArrayBuffer)))return J(h,o,a);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const m=h.valueOf&&h.valueOf();if(m!=null&&m!==h)return c.from(m,o,a);const A=pt(h);if(A)return A;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return c.from(h[Symbol.toPrimitive]("string"),o,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}c.from=function(h,o,a){return b(h,o,a)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function B(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function N(h,o,a){return B(h),h<=0?y(h):o!==void 0?typeof a=="string"?y(h).fill(o,a):y(h).fill(o):y(h)}c.alloc=function(h,o,a){return N(h,o,a)};function O(h){return B(h),y(h<0?0:At(h)|0)}c.allocUnsafe=function(h){return O(h)},c.allocUnsafeSlow=function(h){return O(h)};function D(h,o){if((typeof o!="string"||o==="")&&(o="utf8"),!c.isEncoding(o))throw new TypeError("Unknown encoding: "+o);const a=K(h,o)|0;let m=y(a);const A=m.write(h,o);return A!==a&&(m=m.slice(0,A)),m}function M(h){const o=h.length<0?0:At(h.length)|0,a=y(o);for(let m=0;m<o;m+=1)a[m]=h[m]&255;return a}function j(h){if(F(h,Uint8Array)){const o=new Uint8Array(h);return J(o.buffer,o.byteOffset,o.byteLength)}return M(h)}function J(h,o,a){if(o<0||h.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<o+(a||0))throw new RangeError('"length" is outside of buffer bounds');let m;return o===void 0&&a===void 0?m=new Uint8Array(h):a===void 0?m=new Uint8Array(h,o):m=new Uint8Array(h,o,a),Object.setPrototypeOf(m,c.prototype),m}function pt(h){if(c.isBuffer(h)){const o=At(h.length)|0,a=y(o);return a.length===0||h.copy(a,0,0,o),a}if(h.length!==void 0)return typeof h.length!="number"||P(h.length)?y(0):M(h);if(h.type==="Buffer"&&Array.isArray(h.data))return M(h.data)}function At(h){if(h>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return h|0}function ut(h){return+h!=h&&(h=0),c.alloc(+h)}c.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==c.prototype},c.compare=function(o,a){if(F(o,Uint8Array)&&(o=c.from(o,o.offset,o.byteLength)),F(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength)),!c.isBuffer(o)||!c.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===a)return 0;let m=o.length,A=a.length;for(let R=0,v=Math.min(m,A);R<v;++R)if(o[R]!==a[R]){m=o[R],A=a[R];break}return m<A?-1:A<m?1:0},c.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(o,a){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return c.alloc(0);let m;if(a===void 0)for(a=0,m=0;m<o.length;++m)a+=o[m].length;const A=c.allocUnsafe(a);let R=0;for(m=0;m<o.length;++m){let v=o[m];if(F(v,Uint8Array))R+v.length>A.length?(c.isBuffer(v)||(v=c.from(v)),v.copy(A,R)):Uint8Array.prototype.set.call(A,v,R);else if(c.isBuffer(v))v.copy(A,R);else throw new TypeError('"list" argument must be an Array of Buffers');R+=v.length}return A};function K(h,o){if(c.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||F(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);const a=h.length,m=arguments.length>2&&arguments[2]===!0;if(!m&&a===0)return 0;let A=!1;for(;;)switch(o){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return i(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return p(h).length;default:if(A)return m?-1:i(h).length;o=(""+o).toLowerCase(),A=!0}}c.byteLength=K;function St(h,o,a){let m=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,o>>>=0,a<=o))return"";for(h||(h="utf8");;)switch(h){case"hex":return H(this,o,a);case"utf8":case"utf-8":return Bt(this,o,a);case"ascii":return V(this,o,a);case"latin1":case"binary":return L(this,o,a);case"base64":return ct(this,o,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,o,a);default:if(m)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),m=!0}}c.prototype._isBuffer=!0;function ot(h,o,a){const m=h[o];h[o]=h[a],h[a]=m}c.prototype.swap16=function(){const o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let a=0;a<o;a+=2)ot(this,a,a+1);return this},c.prototype.swap32=function(){const o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let a=0;a<o;a+=4)ot(this,a,a+3),ot(this,a+1,a+2);return this},c.prototype.swap64=function(){const o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let a=0;a<o;a+=8)ot(this,a,a+7),ot(this,a+1,a+6),ot(this,a+2,a+5),ot(this,a+3,a+4);return this},c.prototype.toString=function(){const o=this.length;return o===0?"":arguments.length===0?Bt(this,0,o):St.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(o){if(!c.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:c.compare(this,o)===0},c.prototype.inspect=function(){let o="";const a=e.INSPECT_MAX_BYTES;return o=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(o+=" ... "),"<Buffer "+o+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(o,a,m,A,R){if(F(o,Uint8Array)&&(o=c.from(o,o.offset,o.byteLength)),!c.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(a===void 0&&(a=0),m===void 0&&(m=o?o.length:0),A===void 0&&(A=0),R===void 0&&(R=this.length),a<0||m>o.length||A<0||R>this.length)throw new RangeError("out of range index");if(A>=R&&a>=m)return 0;if(A>=R)return-1;if(a>=m)return 1;if(a>>>=0,m>>>=0,A>>>=0,R>>>=0,this===o)return 0;let v=R-A,tt=m-a;const ft=Math.min(v,tt),rt=this.slice(A,R),Q=o.slice(a,m);for(let mt=0;mt<ft;++mt)if(rt[mt]!==Q[mt]){v=rt[mt],tt=Q[mt];break}return v<tt?-1:tt<v?1:0};function q(h,o,a,m,A){if(h.length===0)return-1;if(typeof a=="string"?(m=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,P(a)&&(a=A?0:h.length-1),a<0&&(a=h.length+a),a>=h.length){if(A)return-1;a=h.length-1}else if(a<0)if(A)a=0;else return-1;if(typeof o=="string"&&(o=c.from(o,m)),c.isBuffer(o))return o.length===0?-1:X(h,o,a,m,A);if(typeof o=="number")return o=o&255,typeof Uint8Array.prototype.indexOf=="function"?A?Uint8Array.prototype.indexOf.call(h,o,a):Uint8Array.prototype.lastIndexOf.call(h,o,a):X(h,[o],a,m,A);throw new TypeError("val must be string, number or Buffer")}function X(h,o,a,m,A){let R=1,v=h.length,tt=o.length;if(m!==void 0&&(m=String(m).toLowerCase(),m==="ucs2"||m==="ucs-2"||m==="utf16le"||m==="utf-16le")){if(h.length<2||o.length<2)return-1;R=2,v/=2,tt/=2,a/=2}function ft(Q,mt){return R===1?Q[mt]:Q.readUInt16BE(mt*R)}let rt;if(A){let Q=-1;for(rt=a;rt<v;rt++)if(ft(h,rt)===ft(o,Q===-1?0:rt-Q)){if(Q===-1&&(Q=rt),rt-Q+1===tt)return Q*R}else Q!==-1&&(rt-=rt-Q),Q=-1}else for(a+tt>v&&(a=v-tt),rt=a;rt>=0;rt--){let Q=!0;for(let mt=0;mt<tt;mt++)if(ft(h,rt+mt)!==ft(o,mt)){Q=!1;break}if(Q)return rt}return-1}c.prototype.includes=function(o,a,m){return this.indexOf(o,a,m)!==-1},c.prototype.indexOf=function(o,a,m){return q(this,o,a,m,!0)},c.prototype.lastIndexOf=function(o,a,m){return q(this,o,a,m,!1)};function et(h,o,a,m){a=Number(a)||0;const A=h.length-a;m?(m=Number(m),m>A&&(m=A)):m=A;const R=o.length;m>R/2&&(m=R/2);let v;for(v=0;v<m;++v){const tt=parseInt(o.substr(v*2,2),16);if(P(tt))return v;h[a+v]=tt}return v}function nt(h,o,a,m){return _(i(o,h.length-a),h,a,m)}function C(h,o,a,m){return _(s(o),h,a,m)}function gt(h,o,a,m){return _(p(o),h,a,m)}function st(h,o,a,m){return _(l(o,h.length-a),h,a,m)}c.prototype.write=function(o,a,m,A){if(a===void 0)A="utf8",m=this.length,a=0;else if(m===void 0&&typeof a=="string")A=a,m=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(m)?(m=m>>>0,A===void 0&&(A="utf8")):(A=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const R=this.length-a;if((m===void 0||m>R)&&(m=R),o.length>0&&(m<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");let v=!1;for(;;)switch(A){case"hex":return et(this,o,a,m);case"utf8":case"utf-8":return nt(this,o,a,m);case"ascii":case"latin1":case"binary":return C(this,o,a,m);case"base64":return gt(this,o,a,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return st(this,o,a,m);default:if(v)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),v=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ct(h,o,a){return o===0&&a===h.length?t.fromByteArray(h):t.fromByteArray(h.slice(o,a))}function Bt(h,o,a){a=Math.min(h.length,a);const m=[];let A=o;for(;A<a;){const R=h[A];let v=null,tt=R>239?4:R>223?3:R>191?2:1;if(A+tt<=a){let ft,rt,Q,mt;switch(tt){case 1:R<128&&(v=R);break;case 2:ft=h[A+1],(ft&192)===128&&(mt=(R&31)<<6|ft&63,mt>127&&(v=mt));break;case 3:ft=h[A+1],rt=h[A+2],(ft&192)===128&&(rt&192)===128&&(mt=(R&15)<<12|(ft&63)<<6|rt&63,mt>2047&&(mt<55296||mt>57343)&&(v=mt));break;case 4:ft=h[A+1],rt=h[A+2],Q=h[A+3],(ft&192)===128&&(rt&192)===128&&(Q&192)===128&&(mt=(R&15)<<18|(ft&63)<<12|(rt&63)<<6|Q&63,mt>65535&&mt<1114112&&(v=mt))}}v===null?(v=65533,tt=1):v>65535&&(v-=65536,m.push(v>>>10&1023|55296),v=56320|v&1023),m.push(v),A+=tt}return Ct(m)}const xt=4096;function Ct(h){const o=h.length;if(o<=xt)return String.fromCharCode.apply(String,h);let a="",m=0;for(;m<o;)a+=String.fromCharCode.apply(String,h.slice(m,m+=xt));return a}function V(h,o,a){let m="";a=Math.min(h.length,a);for(let A=o;A<a;++A)m+=String.fromCharCode(h[A]&127);return m}function L(h,o,a){let m="";a=Math.min(h.length,a);for(let A=o;A<a;++A)m+=String.fromCharCode(h[A]);return m}function H(h,o,a){const m=h.length;(!o||o<0)&&(o=0),(!a||a<0||a>m)&&(a=m);let A="";for(let R=o;R<a;++R)A+=W[h[R]];return A}function z(h,o,a){const m=h.slice(o,a);let A="";for(let R=0;R<m.length-1;R+=2)A+=String.fromCharCode(m[R]+m[R+1]*256);return A}c.prototype.slice=function(o,a){const m=this.length;o=~~o,a=a===void 0?m:~~a,o<0?(o+=m,o<0&&(o=0)):o>m&&(o=m),a<0?(a+=m,a<0&&(a=0)):a>m&&(a=m),a<o&&(a=o);const A=this.subarray(o,a);return Object.setPrototypeOf(A,c.prototype),A};function G(h,o,a){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+o>a)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(o,a,m){o=o>>>0,a=a>>>0,m||G(o,a,this.length);let A=this[o],R=1,v=0;for(;++v<a&&(R*=256);)A+=this[o+v]*R;return A},c.prototype.readUintBE=c.prototype.readUIntBE=function(o,a,m){o=o>>>0,a=a>>>0,m||G(o,a,this.length);let A=this[o+--a],R=1;for(;a>0&&(R*=256);)A+=this[o+--a]*R;return A},c.prototype.readUint8=c.prototype.readUInt8=function(o,a){return o=o>>>0,a||G(o,1,this.length),this[o]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(o,a){return o=o>>>0,a||G(o,2,this.length),this[o]|this[o+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(o,a){return o=o>>>0,a||G(o,2,this.length),this[o]<<8|this[o+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(o,a){return o=o>>>0,a||G(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(o,a){return o=o>>>0,a||G(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},c.prototype.readBigUInt64LE=Z(function(o){o=o>>>0,T(o,"offset");const a=this[o],m=this[o+7];(a===void 0||m===void 0)&&S(o,this.length-8);const A=a+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24,R=this[++o]+this[++o]*2**8+this[++o]*2**16+m*2**24;return BigInt(A)+(BigInt(R)<<BigInt(32))}),c.prototype.readBigUInt64BE=Z(function(o){o=o>>>0,T(o,"offset");const a=this[o],m=this[o+7];(a===void 0||m===void 0)&&S(o,this.length-8);const A=a*2**24+this[++o]*2**16+this[++o]*2**8+this[++o],R=this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+m;return(BigInt(A)<<BigInt(32))+BigInt(R)}),c.prototype.readIntLE=function(o,a,m){o=o>>>0,a=a>>>0,m||G(o,a,this.length);let A=this[o],R=1,v=0;for(;++v<a&&(R*=256);)A+=this[o+v]*R;return R*=128,A>=R&&(A-=Math.pow(2,8*a)),A},c.prototype.readIntBE=function(o,a,m){o=o>>>0,a=a>>>0,m||G(o,a,this.length);let A=a,R=1,v=this[o+--A];for(;A>0&&(R*=256);)v+=this[o+--A]*R;return R*=128,v>=R&&(v-=Math.pow(2,8*a)),v},c.prototype.readInt8=function(o,a){return o=o>>>0,a||G(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},c.prototype.readInt16LE=function(o,a){o=o>>>0,a||G(o,2,this.length);const m=this[o]|this[o+1]<<8;return m&32768?m|4294901760:m},c.prototype.readInt16BE=function(o,a){o=o>>>0,a||G(o,2,this.length);const m=this[o+1]|this[o]<<8;return m&32768?m|4294901760:m},c.prototype.readInt32LE=function(o,a){return o=o>>>0,a||G(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},c.prototype.readInt32BE=function(o,a){return o=o>>>0,a||G(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},c.prototype.readBigInt64LE=Z(function(o){o=o>>>0,T(o,"offset");const a=this[o],m=this[o+7];(a===void 0||m===void 0)&&S(o,this.length-8);const A=this[o+4]+this[o+5]*2**8+this[o+6]*2**16+(m<<24);return(BigInt(A)<<BigInt(32))+BigInt(a+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24)}),c.prototype.readBigInt64BE=Z(function(o){o=o>>>0,T(o,"offset");const a=this[o],m=this[o+7];(a===void 0||m===void 0)&&S(o,this.length-8);const A=(a<<24)+this[++o]*2**16+this[++o]*2**8+this[++o];return(BigInt(A)<<BigInt(32))+BigInt(this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+m)}),c.prototype.readFloatLE=function(o,a){return o=o>>>0,a||G(o,4,this.length),r.read(this,o,!0,23,4)},c.prototype.readFloatBE=function(o,a){return o=o>>>0,a||G(o,4,this.length),r.read(this,o,!1,23,4)},c.prototype.readDoubleLE=function(o,a){return o=o>>>0,a||G(o,8,this.length),r.read(this,o,!0,52,8)},c.prototype.readDoubleBE=function(o,a){return o=o>>>0,a||G(o,8,this.length),r.read(this,o,!1,52,8)};function $(h,o,a,m,A,R){if(!c.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>A||o<R)throw new RangeError('"value" argument is out of bounds');if(a+m>h.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(o,a,m,A){if(o=+o,a=a>>>0,m=m>>>0,!A){const tt=Math.pow(2,8*m)-1;$(this,o,a,m,tt,0)}let R=1,v=0;for(this[a]=o&255;++v<m&&(R*=256);)this[a+v]=o/R&255;return a+m},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(o,a,m,A){if(o=+o,a=a>>>0,m=m>>>0,!A){const tt=Math.pow(2,8*m)-1;$(this,o,a,m,tt,0)}let R=m-1,v=1;for(this[a+R]=o&255;--R>=0&&(v*=256);)this[a+R]=o/v&255;return a+m},c.prototype.writeUint8=c.prototype.writeUInt8=function(o,a,m){return o=+o,a=a>>>0,m||$(this,o,a,1,255,0),this[a]=o&255,a+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(o,a,m){return o=+o,a=a>>>0,m||$(this,o,a,2,65535,0),this[a]=o&255,this[a+1]=o>>>8,a+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(o,a,m){return o=+o,a=a>>>0,m||$(this,o,a,2,65535,0),this[a]=o>>>8,this[a+1]=o&255,a+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(o,a,m){return o=+o,a=a>>>0,m||$(this,o,a,4,4294967295,0),this[a+3]=o>>>24,this[a+2]=o>>>16,this[a+1]=o>>>8,this[a]=o&255,a+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(o,a,m){return o=+o,a=a>>>0,m||$(this,o,a,4,4294967295,0),this[a]=o>>>24,this[a+1]=o>>>16,this[a+2]=o>>>8,this[a+3]=o&255,a+4};function lt(h,o,a,m,A){E(o,m,A,h,a,7);let R=Number(o&BigInt(4294967295));h[a++]=R,R=R>>8,h[a++]=R,R=R>>8,h[a++]=R,R=R>>8,h[a++]=R;let v=Number(o>>BigInt(32)&BigInt(4294967295));return h[a++]=v,v=v>>8,h[a++]=v,v=v>>8,h[a++]=v,v=v>>8,h[a++]=v,a}function g(h,o,a,m,A){E(o,m,A,h,a,7);let R=Number(o&BigInt(4294967295));h[a+7]=R,R=R>>8,h[a+6]=R,R=R>>8,h[a+5]=R,R=R>>8,h[a+4]=R;let v=Number(o>>BigInt(32)&BigInt(4294967295));return h[a+3]=v,v=v>>8,h[a+2]=v,v=v>>8,h[a+1]=v,v=v>>8,h[a]=v,a+8}c.prototype.writeBigUInt64LE=Z(function(o,a=0){return lt(this,o,a,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Z(function(o,a=0){return g(this,o,a,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(o,a,m,A){if(o=+o,a=a>>>0,!A){const ft=Math.pow(2,8*m-1);$(this,o,a,m,ft-1,-ft)}let R=0,v=1,tt=0;for(this[a]=o&255;++R<m&&(v*=256);)o<0&&tt===0&&this[a+R-1]!==0&&(tt=1),this[a+R]=(o/v>>0)-tt&255;return a+m},c.prototype.writeIntBE=function(o,a,m,A){if(o=+o,a=a>>>0,!A){const ft=Math.pow(2,8*m-1);$(this,o,a,m,ft-1,-ft)}let R=m-1,v=1,tt=0;for(this[a+R]=o&255;--R>=0&&(v*=256);)o<0&&tt===0&&this[a+R+1]!==0&&(tt=1),this[a+R]=(o/v>>0)-tt&255;return a+m},c.prototype.writeInt8=function(o,a,m){return o=+o,a=a>>>0,m||$(this,o,a,1,127,-128),o<0&&(o=255+o+1),this[a]=o&255,a+1},c.prototype.writeInt16LE=function(o,a,m){return o=+o,a=a>>>0,m||$(this,o,a,2,32767,-32768),this[a]=o&255,this[a+1]=o>>>8,a+2},c.prototype.writeInt16BE=function(o,a,m){return o=+o,a=a>>>0,m||$(this,o,a,2,32767,-32768),this[a]=o>>>8,this[a+1]=o&255,a+2},c.prototype.writeInt32LE=function(o,a,m){return o=+o,a=a>>>0,m||$(this,o,a,4,2147483647,-2147483648),this[a]=o&255,this[a+1]=o>>>8,this[a+2]=o>>>16,this[a+3]=o>>>24,a+4},c.prototype.writeInt32BE=function(o,a,m){return o=+o,a=a>>>0,m||$(this,o,a,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[a]=o>>>24,this[a+1]=o>>>16,this[a+2]=o>>>8,this[a+3]=o&255,a+4},c.prototype.writeBigInt64LE=Z(function(o,a=0){return lt(this,o,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Z(function(o,a=0){return g(this,o,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function at(h,o,a,m,A,R){if(a+m>h.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function yt(h,o,a,m,A){return o=+o,a=a>>>0,A||at(h,o,a,4),r.write(h,o,a,m,23,4),a+4}c.prototype.writeFloatLE=function(o,a,m){return yt(this,o,a,!0,m)},c.prototype.writeFloatBE=function(o,a,m){return yt(this,o,a,!1,m)};function _t(h,o,a,m,A){return o=+o,a=a>>>0,A||at(h,o,a,8),r.write(h,o,a,m,52,8),a+8}c.prototype.writeDoubleLE=function(o,a,m){return _t(this,o,a,!0,m)},c.prototype.writeDoubleBE=function(o,a,m){return _t(this,o,a,!1,m)},c.prototype.copy=function(o,a,m,A){if(!c.isBuffer(o))throw new TypeError("argument should be a Buffer");if(m||(m=0),!A&&A!==0&&(A=this.length),a>=o.length&&(a=o.length),a||(a=0),A>0&&A<m&&(A=m),A===m||o.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),o.length-a<A-m&&(A=o.length-a+m);const R=A-m;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,m,A):Uint8Array.prototype.set.call(o,this.subarray(m,A),a),R},c.prototype.fill=function(o,a,m,A){if(typeof o=="string"){if(typeof a=="string"?(A=a,a=0,m=this.length):typeof m=="string"&&(A=m,m=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!c.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(o.length===1){const v=o.charCodeAt(0);(A==="utf8"&&v<128||A==="latin1")&&(o=v)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(a<0||this.length<a||this.length<m)throw new RangeError("Out of range index");if(m<=a)return this;a=a>>>0,m=m===void 0?this.length:m>>>0,o||(o=0);let R;if(typeof o=="number")for(R=a;R<m;++R)this[R]=o;else{const v=c.isBuffer(o)?o:c.from(o,A),tt=v.length;if(tt===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(R=0;R<m-a;++R)this[R+a]=v[R%tt]}return this};const k={};function Y(h,o,a){k[h]=class extends a{constructor(){super(),Object.defineProperty(this,"message",{value:o.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(A){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:A,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}Y("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Y("ERR_INVALID_ARG_TYPE",function(h,o){return`The "${h}" argument must be of type number. Received type ${typeof o}`},TypeError),Y("ERR_OUT_OF_RANGE",function(h,o,a){let m=`The value of "${h}" is out of range.`,A=a;return Number.isInteger(a)&&Math.abs(a)>2**32?A=w(String(a)):typeof a=="bigint"&&(A=String(a),(a>BigInt(2)**BigInt(32)||a<-(BigInt(2)**BigInt(32)))&&(A=w(A)),A+="n"),m+=` It must be ${o}. Received ${A}`,m},RangeError);function w(h){let o="",a=h.length;const m=h[0]==="-"?1:0;for(;a>=m+4;a-=3)o=`_${h.slice(a-3,a)}${o}`;return`${h.slice(0,a)}${o}`}function x(h,o,a){T(o,"offset"),(h[o]===void 0||h[o+a]===void 0)&&S(o,h.length-(a+1))}function E(h,o,a,m,A,R){if(h>a||h<o){const v=typeof o=="bigint"?"n":"";let tt;throw o===0||o===BigInt(0)?tt=`>= 0${v} and < 2${v} ** ${(R+1)*8}${v}`:tt=`>= -(2${v} ** ${(R+1)*8-1}${v}) and < 2 ** ${(R+1)*8-1}${v}`,new k.ERR_OUT_OF_RANGE("value",tt,h)}x(m,A,R)}function T(h,o){if(typeof h!="number")throw new k.ERR_INVALID_ARG_TYPE(o,"number",h)}function S(h,o,a){throw Math.floor(h)!==h?(T(h,a),new k.ERR_OUT_OF_RANGE("offset","an integer",h)):o<0?new k.ERR_BUFFER_OUT_OF_BOUNDS:new k.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${o}`,h)}const U=/[^+/0-9A-Za-z-_]/g;function f(h){if(h=h.split("=")[0],h=h.trim().replace(U,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function i(h,o){o=o||1/0;let a;const m=h.length;let A=null;const R=[];for(let v=0;v<m;++v){if(a=h.charCodeAt(v),a>55295&&a<57344){if(!A){if(a>56319){(o-=3)>-1&&R.push(239,191,189);continue}else if(v+1===m){(o-=3)>-1&&R.push(239,191,189);continue}A=a;continue}if(a<56320){(o-=3)>-1&&R.push(239,191,189),A=a;continue}a=(A-55296<<10|a-56320)+65536}else A&&(o-=3)>-1&&R.push(239,191,189);if(A=null,a<128){if((o-=1)<0)break;R.push(a)}else if(a<2048){if((o-=2)<0)break;R.push(a>>6|192,a&63|128)}else if(a<65536){if((o-=3)<0)break;R.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((o-=4)<0)break;R.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return R}function s(h){const o=[];for(let a=0;a<h.length;++a)o.push(h.charCodeAt(a)&255);return o}function l(h,o){let a,m,A;const R=[];for(let v=0;v<h.length&&!((o-=2)<0);++v)a=h.charCodeAt(v),m=a>>8,A=a%256,R.push(A),R.push(m);return R}function p(h){return t.toByteArray(f(h))}function _(h,o,a,m){let A;for(A=0;A<m&&!(A+a>=o.length||A>=h.length);++A)o[A+a]=h[A];return A}function F(h,o){return h instanceof o||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===o.name}function P(h){return h!==h}const W=function(){const h="0123456789abcdef",o=new Array(256);for(let a=0;a<16;++a){const m=a*16;for(let A=0;A<16;++A)o[m+A]=h[a]+h[A]}return o}();function Z(h){return typeof BigInt>"u"?it:h}function it(){throw new Error("BigInt not supported")}})(ds);var bn;(function(e){e[e.SysFatal=1]="SysFatal",e[e.SysTransient=2]="SysTransient",e[e.DestinationInvalid=3]="DestinationInvalid",e[e.CanisterReject=4]="CanisterReject",e[e.CanisterError=5]="CanisterError"})(bn||(bn={}));const Ke="abcdefghijklmnopqrstuvwxyz234567",ge=Object.create(null);for(let e=0;e<Ke.length;e++)ge[Ke[e]]=e;ge[0]=ge.o,ge[1]=ge.i;function _s(e){let t=0,r=0,n="";function u(d){return t<0?r|=d>>-t:r=d<<t&248,t>3?(t-=8,1):(t<4&&(n+=Ke[r>>3],t+=5),0)}for(let d=0;d<e.length;)d+=u(e[d]);return n+(t<0?Ke[r>>3]:"")}function Is(e){let t=0,r=0;const n=new Uint8Array(e.length*4/3|0);let u=0;function d(y){let c=ge[y.toLowerCase()];if(c===void 0)throw new Error(`Invalid character: ${JSON.stringify(y)}`);c<<=3,r|=c>>>t,t+=5,t>=8&&(n[u++]=r,t-=8,t>0?r=c<<5-t&255:r=0)}for(const y of e)d(y);return n.slice(0,u)}const As=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Bs(e){const t=new Uint8Array(e);let r=-1;for(let n=0;n<t.length;n++){const d=(t[n]^r)&255;r=As[d]^r>>>8}return(r^-1)>>>0}const xe=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ss(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ts(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function wr(e,...t){if(!Ss(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function En(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Us(e,t){wr(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Re(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function yr(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Yt(e,t){return e<<32-t|e>>>t}function Ns(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function _n(e){return typeof e=="string"&&(e=Ns(e)),wr(e),e}class Fs{}function gr(e){const t=n=>e().update(_n(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function vs(e=32){if(xe&&typeof xe.getRandomValues=="function")return xe.getRandomValues(new Uint8Array(e));if(xe&&typeof xe.randomBytes=="function")return Uint8Array.from(xe.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function Rs(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const u=BigInt(32),d=BigInt(4294967295),y=Number(r>>u&d),c=Number(r&d),b=n?4:0,B=n?0:4;e.setUint32(t+b,y,n),e.setUint32(t+B,c,n)}function Os(e,t,r){return e&t^~e&r}function Ls(e,t,r){return e&t^e&r^t&r}class In extends Fs{constructor(t,r,n,u){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=u,this.buffer=new Uint8Array(t),this.view=yr(this.buffer)}update(t){En(this),t=_n(t),wr(t);const{view:r,buffer:n,blockLen:u}=this,d=t.length;for(let y=0;y<d;){const c=Math.min(u-this.pos,d-y);if(c===u){const b=yr(t);for(;u<=d-y;y+=u)this.process(b,y);continue}n.set(t.subarray(y,y+c),this.pos),this.pos+=c,y+=c,this.pos===u&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){En(this),Us(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:u,isLE:d}=this;let{pos:y}=this;r[y++]=128,Re(this.buffer.subarray(y)),this.padOffset>u-y&&(this.process(n,0),y=0);for(let O=y;O<u;O++)r[O]=0;Rs(n,u-8,BigInt(this.length*8),d),this.process(n,0);const c=yr(t),b=this.outputLen;if(b%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const B=b/4,N=this.get();if(B>N.length)throw new Error("_sha2: outputLen bigger than state");for(let O=0;O<B;O++)c.setUint32(4*O,N[O],d)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:u,finished:d,destroyed:y,pos:c}=this;return t.destroyed=y,t.finished=d,t.length=u,t.pos=c,u%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const re=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ne=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),Rt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ze=BigInt(2**32-1),An=BigInt(32);function Ds(e,t=!1){return t?{h:Number(e&ze),l:Number(e>>An&ze)}:{h:Number(e>>An&ze)|0,l:Number(e&ze)|0}}function Ps(e,t=!1){const r=e.length;let n=new Uint32Array(r),u=new Uint32Array(r);for(let d=0;d<r;d++){const{h:y,l:c}=Ds(e[d],t);[n[d],u[d]]=[y,c]}return[n,u]}const Bn=(e,t,r)=>e>>>r,Sn=(e,t,r)=>e<<32-r|t>>>r,me=(e,t,r)=>e>>>r|t<<32-r,be=(e,t,r)=>e<<32-r|t>>>r,Ye=(e,t,r)=>e<<64-r|t>>>r-32,We=(e,t,r)=>e>>>r-32|t<<64-r;function Jt(e,t,r,n){const u=(t>>>0)+(n>>>0);return{h:e+r+(u/2**32|0)|0,l:u|0}}const Ms=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Cs=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,ks=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Gs=(e,t,r,n,u)=>t+r+n+u+(e/2**32|0)|0,$s=(e,t,r,n,u)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(u>>>0),Hs=(e,t,r,n,u,d)=>t+r+n+u+d+(e/2**32|0)|0,Ks=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ie=new Uint32Array(64);class Tn extends In{constructor(t=32){super(64,t,8,!1),this.A=re[0]|0,this.B=re[1]|0,this.C=re[2]|0,this.D=re[3]|0,this.E=re[4]|0,this.F=re[5]|0,this.G=re[6]|0,this.H=re[7]|0}get(){const{A:t,B:r,C:n,D:u,E:d,F:y,G:c,H:b}=this;return[t,r,n,u,d,y,c,b]}set(t,r,n,u,d,y,c,b){this.A=t|0,this.B=r|0,this.C=n|0,this.D=u|0,this.E=d|0,this.F=y|0,this.G=c|0,this.H=b|0}process(t,r){for(let O=0;O<16;O++,r+=4)ie[O]=t.getUint32(r,!1);for(let O=16;O<64;O++){const D=ie[O-15],M=ie[O-2],j=Yt(D,7)^Yt(D,18)^D>>>3,J=Yt(M,17)^Yt(M,19)^M>>>10;ie[O]=J+ie[O-7]+j+ie[O-16]|0}let{A:n,B:u,C:d,D:y,E:c,F:b,G:B,H:N}=this;for(let O=0;O<64;O++){const D=Yt(c,6)^Yt(c,11)^Yt(c,25),M=N+D+Os(c,b,B)+Ks[O]+ie[O]|0,J=(Yt(n,2)^Yt(n,13)^Yt(n,22))+Ls(n,u,d)|0;N=B,B=b,b=c,c=y+M|0,y=d,d=u,u=n,n=M+J|0}n=n+this.A|0,u=u+this.B|0,d=d+this.C|0,y=y+this.D|0,c=c+this.E|0,b=b+this.F|0,B=B+this.G|0,N=N+this.H|0,this.set(n,u,d,y,c,b,B,N)}roundClean(){Re(ie)}destroy(){this.set(0,0,0,0,0,0,0,0),Re(this.buffer)}}class zs extends Tn{constructor(){super(28),this.A=ne[0]|0,this.B=ne[1]|0,this.C=ne[2]|0,this.D=ne[3]|0,this.E=ne[4]|0,this.F=ne[5]|0,this.G=ne[6]|0,this.H=ne[7]|0}}const Un=Ps(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ys=Un[0],Ws=Un[1],se=new Uint32Array(80),oe=new Uint32Array(80);class Vs extends In{constructor(t=64){super(128,t,16,!1),this.Ah=Rt[0]|0,this.Al=Rt[1]|0,this.Bh=Rt[2]|0,this.Bl=Rt[3]|0,this.Ch=Rt[4]|0,this.Cl=Rt[5]|0,this.Dh=Rt[6]|0,this.Dl=Rt[7]|0,this.Eh=Rt[8]|0,this.El=Rt[9]|0,this.Fh=Rt[10]|0,this.Fl=Rt[11]|0,this.Gh=Rt[12]|0,this.Gl=Rt[13]|0,this.Hh=Rt[14]|0,this.Hl=Rt[15]|0}get(){const{Ah:t,Al:r,Bh:n,Bl:u,Ch:d,Cl:y,Dh:c,Dl:b,Eh:B,El:N,Fh:O,Fl:D,Gh:M,Gl:j,Hh:J,Hl:pt}=this;return[t,r,n,u,d,y,c,b,B,N,O,D,M,j,J,pt]}set(t,r,n,u,d,y,c,b,B,N,O,D,M,j,J,pt){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=u|0,this.Ch=d|0,this.Cl=y|0,this.Dh=c|0,this.Dl=b|0,this.Eh=B|0,this.El=N|0,this.Fh=O|0,this.Fl=D|0,this.Gh=M|0,this.Gl=j|0,this.Hh=J|0,this.Hl=pt|0}process(t,r){for(let K=0;K<16;K++,r+=4)se[K]=t.getUint32(r),oe[K]=t.getUint32(r+=4);for(let K=16;K<80;K++){const St=se[K-15]|0,ot=oe[K-15]|0,q=me(St,ot,1)^me(St,ot,8)^Bn(St,ot,7),X=be(St,ot,1)^be(St,ot,8)^Sn(St,ot,7),et=se[K-2]|0,nt=oe[K-2]|0,C=me(et,nt,19)^Ye(et,nt,61)^Bn(et,nt,6),gt=be(et,nt,19)^We(et,nt,61)^Sn(et,nt,6),st=ks(X,gt,oe[K-7],oe[K-16]),ct=Gs(st,q,C,se[K-7],se[K-16]);se[K]=ct|0,oe[K]=st|0}let{Ah:n,Al:u,Bh:d,Bl:y,Ch:c,Cl:b,Dh:B,Dl:N,Eh:O,El:D,Fh:M,Fl:j,Gh:J,Gl:pt,Hh:At,Hl:ut}=this;for(let K=0;K<80;K++){const St=me(O,D,14)^me(O,D,18)^Ye(O,D,41),ot=be(O,D,14)^be(O,D,18)^We(O,D,41),q=O&M^~O&J,X=D&j^~D&pt,et=$s(ut,ot,X,Ws[K],oe[K]),nt=Hs(et,At,St,q,Ys[K],se[K]),C=et|0,gt=me(n,u,28)^Ye(n,u,34)^Ye(n,u,39),st=be(n,u,28)^We(n,u,34)^We(n,u,39),ct=n&d^n&c^d&c,Bt=u&y^u&b^y&b;At=J|0,ut=pt|0,J=M|0,pt=j|0,M=O|0,j=D|0,{h:O,l:D}=Jt(B|0,N|0,nt|0,C|0),B=c|0,N=b|0,c=d|0,b=y|0,d=n|0,y=u|0;const xt=Ms(C,st,Bt);n=Cs(xt,nt,gt,ct),u=xt|0}({h:n,l:u}=Jt(this.Ah|0,this.Al|0,n|0,u|0)),{h:d,l:y}=Jt(this.Bh|0,this.Bl|0,d|0,y|0),{h:c,l:b}=Jt(this.Ch|0,this.Cl|0,c|0,b|0),{h:B,l:N}=Jt(this.Dh|0,this.Dl|0,B|0,N|0),{h:O,l:D}=Jt(this.Eh|0,this.El|0,O|0,D|0),{h:M,l:j}=Jt(this.Fh|0,this.Fl|0,M|0,j|0),{h:J,l:pt}=Jt(this.Gh|0,this.Gl|0,J|0,pt|0),{h:At,l:ut}=Jt(this.Hh|0,this.Hl|0,At|0,ut|0),this.set(n,u,d,y,c,b,B,N,O,D,M,j,J,pt,At,ut)}roundClean(){Re(se,oe)}destroy(){Re(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const qs=gr(()=>new Tn),Js=gr(()=>new zs),Xs=gr(()=>new Vs),Zs=qs,js=Js;function Qs(e){return js.create().update(new Uint8Array(e)).digest()}const Ve="__principal__",to=2,Nn=4,eo="aaaaa-aa",ro=e=>{var t;return new Uint8Array(((t=e.match(/.{1,2}/g))!==null&&t!==void 0?t:[]).map(r=>parseInt(r,16)))},no=e=>e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),"");class ae{constructor(t){this._arr=t,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([Nn]))}static managementCanister(){return this.fromText(eo)}static selfAuthenticating(t){const r=Qs(t);return new this(new Uint8Array([...r,to]))}static from(t){if(typeof t=="string")return ae.fromText(t);if(Object.getPrototypeOf(t)===Uint8Array.prototype)return new ae(t);if(typeof t=="object"&&t!==null&&t._isPrincipal===!0)return new ae(t._arr);throw new Error(`Impossible to convert ${JSON.stringify(t)} to Principal.`)}static fromHex(t){return new this(ro(t))}static fromText(t){let r=t;if(t.includes(Ve)){const y=JSON.parse(t);Ve in y&&(r=y[Ve])}const n=r.toLowerCase().replace(/-/g,"");let u=Is(n);u=u.slice(4,u.length);const d=new this(u);if(d.toText()!==r)throw new Error(`Principal "${d.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return d}static fromUint8Array(t){return new this(t)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===Nn}toUint8Array(){return this._arr}toHex(){return no(this._arr).toUpperCase()}toText(){const t=new ArrayBuffer(4);new DataView(t).setUint32(0,Bs(this._arr));const n=new Uint8Array(t),u=Uint8Array.from(this._arr),d=new Uint8Array([...n,...u]),c=_s(d).match(/.{1,5}/g);if(!c)throw new Error;return c.join("-")}toString(){return this.toText()}toJSON(){return{[Ve]:this.toText()}}compareTo(t){for(let r=0;r<Math.min(this._arr.length,t._arr.length);r++){if(this._arr[r]<t._arr[r])return"lt";if(this._arr[r]>t._arr[r])return"gt"}return this._arr.length<t._arr.length?"lt":this._arr.length>t._arr.length?"gt":"eq"}ltEq(t){const r=this.compareTo(t);return r=="lt"||r=="eq"}gtEq(t){const r=this.compareTo(t);return r=="gt"||r=="eq"}}function Oe(...e){const t=new Uint8Array(e.reduce((n,u)=>n+u.byteLength,0));let r=0;for(const n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t.buffer}function Ee(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}const io=new RegExp(/^[0-9a-fA-F]+$/);function ue(e){if(!io.test(e))throw new Error("Invalid hexadecimal string.");const t=[...e].reduce((r,n,u)=>(r[u/2|0]=(r[u/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(t).buffer}function Fn(e,t){if(e.byteLength!==t.byteLength)return e.byteLength-t.byteLength;const r=new Uint8Array(e),n=new Uint8Array(t);for(let u=0;u<r.length;u++)if(r[u]!==n[u])return r[u]-n[u];return 0}function vn(e,t){return Fn(e,t)===0}function Le(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function De(e){return e instanceof Uint8Array?Le(e):e instanceof ArrayBuffer?e:Array.isArray(e)?Le(new Uint8Array(e)):"buffer"in e?De(e.buffer):Le(new Uint8Array(e))}class xr{constructor(t,r=t?.byteLength||0){this._buffer=_e(t||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}save(){return this._view}restore(t){this._view=t}get buffer(){return _e(this._view.slice())}get byteLength(){return this._view.byteLength}read(t){const r=this._view.subarray(0,t);return this._view=this._view.subarray(t),r.slice().buffer}readUint8(){const t=this._view[0];return this._view=this._view.subarray(1),t}write(t){const r=new Uint8Array(t),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(t){const r=new ArrayBuffer((this._buffer.byteLength+t)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+t);n.set(this._view),this._buffer=r,this._view=n}}function mr(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function _e(e){return e instanceof Uint8Array?mr(e):e instanceof ArrayBuffer?e:Array.isArray(e)?mr(new Uint8Array(e)):"buffer"in e?_e(e.buffer):mr(new Uint8Array(e))}function Rn(){throw new Error("unexpected end of buffer")}function so(e,t){return e.byteLength<t&&Rn(),e.read(t)}function On(e){const t=e.readUint8();return t===void 0&&Rn(),t}function Ln(e){if(typeof e=="number"&&(e=BigInt(e)),e<BigInt(0))throw new Error("Cannot leb encode negative values.");const t=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,r=new xr(new ArrayBuffer(t),0);for(;;){const n=Number(e&BigInt(127));if(e/=BigInt(128),e===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function br(e){typeof e=="number"&&(e=BigInt(e));const t=e<BigInt(0);t&&(e=-e-BigInt(1));const r=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,n=new xr(new ArrayBuffer(r),0);for(;;){const d=u(e);if(e/=BigInt(128),t&&e===BigInt(0)&&d&64||!t&&e===BigInt(0)&&!(d&64)){n.write(new Uint8Array([d]));break}else n.write(new Uint8Array([d|128]))}function u(d){const y=d%BigInt(128);return Number(t?BigInt(128)-y-BigInt(1):y)}return n.buffer}function oo(e,t){if(BigInt(e)<BigInt(0))throw new Error("Cannot write negative values.");return Dn(e,t)}function Dn(e,t){e=BigInt(e);const r=new xr(new ArrayBuffer(Math.min(1,t)),0);let n=0,u=BigInt(256),d=BigInt(0),y=Number(e%u);for(r.write(new Uint8Array([y]));++n<t;)e<0&&d===BigInt(0)&&y!==0&&(d=BigInt(1)),y=Number((e/u-d)%BigInt(256)),r.write(new Uint8Array([y])),u*=BigInt(256);return r.buffer}function Pn(e,t){let r=BigInt(On(e)),n=BigInt(1),u=0;for(;++u<t;){n*=BigInt(256);const d=BigInt(On(e));r=r+n*d}return r}function ao(e,t){let r=Pn(e,t);const n=BigInt(2)**(BigInt(8)*BigInt(t-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function Er(e){const t=BigInt(e);if(e<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<t}const Mn=400;class Cn{display(){return this.name}valueToString(t){return Pe(t)}buildTypeTable(t){t.has(this)||this._buildTypeTableImpl(t)}}class _r extends Cn{checkType(t){if(this.name!==t.name)throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`);return t}_buildTypeTableImpl(t){}}class uo extends Cn{checkType(t){if(t instanceof Xe){const r=t.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`)}encodeType(t){return t.indexOf(this.name)}}class kn extends _r{constructor(t){if(super(),this._bits=t,t!==32&&t!==64)throw new Error("not a valid float type")}accept(t,r){return t.visitFloat(this,r)}covariant(t){if(typeof t=="number"||t instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${Pe(t)}`)}encodeValue(t){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,t,!0):n.setFloat64(0,t,!0),r}encodeType(){const t=this._bits===32?-13:-14;return br(t)}decodeValue(t,r){this.checkType(r);const n=so(t,this._bits/8),u=new DataView(n);return this._bits===32?u.getFloat32(0,!0):u.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(t){return t.toString()}}class qe extends _r{constructor(t){super(),this._bits=t}accept(t,r){return t.visitFixedInt(this,r)}covariant(t){const r=Er(this._bits-1)*BigInt(-1),n=Er(this._bits-1)-BigInt(1);let u=!1;if(typeof t=="bigint")u=t>=r&&t<=n;else if(Number.isInteger(t)){const d=BigInt(t);u=d>=r&&d<=n}else u=!1;if(u)return!0;throw new Error(`Invalid ${this.display()} argument: ${Pe(t)}`)}encodeValue(t){return Dn(t,this._bits/8)}encodeType(){const t=Math.log2(this._bits)-3;return br(-9-t)}decodeValue(t,r){this.checkType(r);const n=ao(t,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(t){return t.toString()}}class Je extends _r{constructor(t){super(),this._bits=t}accept(t,r){return t.visitFixedNat(this,r)}covariant(t){const r=Er(this._bits);let n=!1;if(typeof t=="bigint"&&t>=BigInt(0)?n=t<r:Number.isInteger(t)&&t>=0?n=BigInt(t)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${Pe(t)}`)}encodeValue(t){return oo(t,this._bits/8)}encodeType(){const t=Math.log2(this._bits)-3;return br(-5-t)}decodeValue(t,r){this.checkType(r);const n=Pn(t,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(t){return t.toString()}}class Xe extends uo{constructor(){super(...arguments),this._id=Xe._counter++,this._type=void 0}accept(t,r){if(!this._type)throw Error("Recursive type uninitialized.");return t.visitRec(this,this._type,r)}fill(t){this._type=t}getType(){return this._type}covariant(t){if(this._type&&this._type.covariant(t))return!0;throw new Error(`Invalid ${this.display()} argument: ${Pe(t)}`)}encodeValue(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(t)}_buildTypeTableImpl(t){if(!this._type)throw Error("Recursive type uninitialized.");t.add(this,new Uint8Array([])),this._type.buildTypeTable(t),t.merge(this,this._type.name)}decodeValue(t,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(t,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`${this.name}.${this._type.name}`}valueToString(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(t)}}Xe._counter=0;function Pe(e){const t=JSON.stringify(e,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return t&&t.length>Mn?t.substring(0,Mn-3)+"...":t}new kn(32),new kn(64),new qe(8),new qe(16),new qe(32),new qe(64),new Je(8),new Je(16),new Je(32),new Je(64);var Gn={},Me={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){var t=Fe,r=ve,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=ut,e.INSPECT_MAX_BYTES=50;var u=2147483647;e.kMaxLength=u,c.TYPED_ARRAY_SUPPORT=d(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{var f=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(f,i),f.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function y(f){if(f>u)throw new RangeError('The value "'+f+'" is invalid for option "size"');var i=new Uint8Array(f);return Object.setPrototypeOf(i,c.prototype),i}function c(f,i,s){if(typeof f=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(f)}return b(f,i,s)}c.poolSize=8192;function b(f,i,s){if(typeof f=="string")return D(f,i);if(ArrayBuffer.isView(f))return j(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(T(f,ArrayBuffer)||f&&T(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(T(f,SharedArrayBuffer)||f&&T(f.buffer,SharedArrayBuffer)))return J(f,i,s);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var l=f.valueOf&&f.valueOf();if(l!=null&&l!==f)return c.from(l,i,s);var p=pt(f);if(p)return p;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return c.from(f[Symbol.toPrimitive]("string"),i,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}c.from=function(f,i,s){return b(f,i,s)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function B(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function N(f,i,s){return B(f),f<=0?y(f):i!==void 0?typeof s=="string"?y(f).fill(i,s):y(f).fill(i):y(f)}c.alloc=function(f,i,s){return N(f,i,s)};function O(f){return B(f),y(f<0?0:At(f)|0)}c.allocUnsafe=function(f){return O(f)},c.allocUnsafeSlow=function(f){return O(f)};function D(f,i){if((typeof i!="string"||i==="")&&(i="utf8"),!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var s=K(f,i)|0,l=y(s),p=l.write(f,i);return p!==s&&(l=l.slice(0,p)),l}function M(f){for(var i=f.length<0?0:At(f.length)|0,s=y(i),l=0;l<i;l+=1)s[l]=f[l]&255;return s}function j(f){if(T(f,Uint8Array)){var i=new Uint8Array(f);return J(i.buffer,i.byteOffset,i.byteLength)}return M(f)}function J(f,i,s){if(i<0||f.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<i+(s||0))throw new RangeError('"length" is outside of buffer bounds');var l;return i===void 0&&s===void 0?l=new Uint8Array(f):s===void 0?l=new Uint8Array(f,i):l=new Uint8Array(f,i,s),Object.setPrototypeOf(l,c.prototype),l}function pt(f){if(c.isBuffer(f)){var i=At(f.length)|0,s=y(i);return s.length===0||f.copy(s,0,0,i),s}if(f.length!==void 0)return typeof f.length!="number"||S(f.length)?y(0):M(f);if(f.type==="Buffer"&&Array.isArray(f.data))return M(f.data)}function At(f){if(f>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return f|0}function ut(f){return+f!=f&&(f=0),c.alloc(+f)}c.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==c.prototype},c.compare=function(i,s){if(T(i,Uint8Array)&&(i=c.from(i,i.offset,i.byteLength)),T(s,Uint8Array)&&(s=c.from(s,s.offset,s.byteLength)),!c.isBuffer(i)||!c.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===s)return 0;for(var l=i.length,p=s.length,_=0,F=Math.min(l,p);_<F;++_)if(i[_]!==s[_]){l=i[_],p=s[_];break}return l<p?-1:p<l?1:0},c.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(i,s){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return c.alloc(0);var l;if(s===void 0)for(s=0,l=0;l<i.length;++l)s+=i[l].length;var p=c.allocUnsafe(s),_=0;for(l=0;l<i.length;++l){var F=i[l];if(T(F,Uint8Array))_+F.length>p.length?c.from(F).copy(p,_):Uint8Array.prototype.set.call(p,F,_);else if(c.isBuffer(F))F.copy(p,_);else throw new TypeError('"list" argument must be an Array of Buffers');_+=F.length}return p};function K(f,i){if(c.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||T(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var s=f.length,l=arguments.length>2&&arguments[2]===!0;if(!l&&s===0)return 0;for(var p=!1;;)switch(i){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return k(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return x(f).length;default:if(p)return l?-1:k(f).length;i=(""+i).toLowerCase(),p=!0}}c.byteLength=K;function St(f,i,s){var l=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,i>>>=0,s<=i))return"";for(f||(f="utf8");;)switch(f){case"hex":return H(this,i,s);case"utf8":case"utf-8":return Bt(this,i,s);case"ascii":return V(this,i,s);case"latin1":case"binary":return L(this,i,s);case"base64":return ct(this,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,i,s);default:if(l)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),l=!0}}c.prototype._isBuffer=!0;function ot(f,i,s){var l=f[i];f[i]=f[s],f[s]=l}c.prototype.swap16=function(){var i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var s=0;s<i;s+=2)ot(this,s,s+1);return this},c.prototype.swap32=function(){var i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var s=0;s<i;s+=4)ot(this,s,s+3),ot(this,s+1,s+2);return this},c.prototype.swap64=function(){var i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var s=0;s<i;s+=8)ot(this,s,s+7),ot(this,s+1,s+6),ot(this,s+2,s+5),ot(this,s+3,s+4);return this},c.prototype.toString=function(){var i=this.length;return i===0?"":arguments.length===0?Bt(this,0,i):St.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(i){if(!c.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:c.compare(this,i)===0},c.prototype.inspect=function(){var i="",s=e.INSPECT_MAX_BYTES;return i=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(i+=" ... "),"<Buffer "+i+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(i,s,l,p,_){if(T(i,Uint8Array)&&(i=c.from(i,i.offset,i.byteLength)),!c.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(s===void 0&&(s=0),l===void 0&&(l=i?i.length:0),p===void 0&&(p=0),_===void 0&&(_=this.length),s<0||l>i.length||p<0||_>this.length)throw new RangeError("out of range index");if(p>=_&&s>=l)return 0;if(p>=_)return-1;if(s>=l)return 1;if(s>>>=0,l>>>=0,p>>>=0,_>>>=0,this===i)return 0;for(var F=_-p,P=l-s,W=Math.min(F,P),Z=this.slice(p,_),it=i.slice(s,l),h=0;h<W;++h)if(Z[h]!==it[h]){F=Z[h],P=it[h];break}return F<P?-1:P<F?1:0};function q(f,i,s,l,p){if(f.length===0)return-1;if(typeof s=="string"?(l=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,S(s)&&(s=p?0:f.length-1),s<0&&(s=f.length+s),s>=f.length){if(p)return-1;s=f.length-1}else if(s<0)if(p)s=0;else return-1;if(typeof i=="string"&&(i=c.from(i,l)),c.isBuffer(i))return i.length===0?-1:X(f,i,s,l,p);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?p?Uint8Array.prototype.indexOf.call(f,i,s):Uint8Array.prototype.lastIndexOf.call(f,i,s):X(f,[i],s,l,p);throw new TypeError("val must be string, number or Buffer")}function X(f,i,s,l,p){var _=1,F=f.length,P=i.length;if(l!==void 0&&(l=String(l).toLowerCase(),l==="ucs2"||l==="ucs-2"||l==="utf16le"||l==="utf-16le")){if(f.length<2||i.length<2)return-1;_=2,F/=2,P/=2,s/=2}function W(a,m){return _===1?a[m]:a.readUInt16BE(m*_)}var Z;if(p){var it=-1;for(Z=s;Z<F;Z++)if(W(f,Z)===W(i,it===-1?0:Z-it)){if(it===-1&&(it=Z),Z-it+1===P)return it*_}else it!==-1&&(Z-=Z-it),it=-1}else for(s+P>F&&(s=F-P),Z=s;Z>=0;Z--){for(var h=!0,o=0;o<P;o++)if(W(f,Z+o)!==W(i,o)){h=!1;break}if(h)return Z}return-1}c.prototype.includes=function(i,s,l){return this.indexOf(i,s,l)!==-1},c.prototype.indexOf=function(i,s,l){return q(this,i,s,l,!0)},c.prototype.lastIndexOf=function(i,s,l){return q(this,i,s,l,!1)};function et(f,i,s,l){s=Number(s)||0;var p=f.length-s;l?(l=Number(l),l>p&&(l=p)):l=p;var _=i.length;l>_/2&&(l=_/2);for(var F=0;F<l;++F){var P=parseInt(i.substr(F*2,2),16);if(S(P))return F;f[s+F]=P}return F}function nt(f,i,s,l){return E(k(i,f.length-s),f,s,l)}function C(f,i,s,l){return E(Y(i),f,s,l)}function gt(f,i,s,l){return E(x(i),f,s,l)}function st(f,i,s,l){return E(w(i,f.length-s),f,s,l)}c.prototype.write=function(i,s,l,p){if(s===void 0)p="utf8",l=this.length,s=0;else if(l===void 0&&typeof s=="string")p=s,l=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(l)?(l=l>>>0,p===void 0&&(p="utf8")):(p=l,l=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var _=this.length-s;if((l===void 0||l>_)&&(l=_),i.length>0&&(l<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");p||(p="utf8");for(var F=!1;;)switch(p){case"hex":return et(this,i,s,l);case"utf8":case"utf-8":return nt(this,i,s,l);case"ascii":case"latin1":case"binary":return C(this,i,s,l);case"base64":return gt(this,i,s,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return st(this,i,s,l);default:if(F)throw new TypeError("Unknown encoding: "+p);p=(""+p).toLowerCase(),F=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ct(f,i,s){return i===0&&s===f.length?t.fromByteArray(f):t.fromByteArray(f.slice(i,s))}function Bt(f,i,s){s=Math.min(f.length,s);for(var l=[],p=i;p<s;){var _=f[p],F=null,P=_>239?4:_>223?3:_>191?2:1;if(p+P<=s){var W,Z,it,h;switch(P){case 1:_<128&&(F=_);break;case 2:W=f[p+1],(W&192)===128&&(h=(_&31)<<6|W&63,h>127&&(F=h));break;case 3:W=f[p+1],Z=f[p+2],(W&192)===128&&(Z&192)===128&&(h=(_&15)<<12|(W&63)<<6|Z&63,h>2047&&(h<55296||h>57343)&&(F=h));break;case 4:W=f[p+1],Z=f[p+2],it=f[p+3],(W&192)===128&&(Z&192)===128&&(it&192)===128&&(h=(_&15)<<18|(W&63)<<12|(Z&63)<<6|it&63,h>65535&&h<1114112&&(F=h))}}F===null?(F=65533,P=1):F>65535&&(F-=65536,l.push(F>>>10&1023|55296),F=56320|F&1023),l.push(F),p+=P}return Ct(l)}var xt=4096;function Ct(f){var i=f.length;if(i<=xt)return String.fromCharCode.apply(String,f);for(var s="",l=0;l<i;)s+=String.fromCharCode.apply(String,f.slice(l,l+=xt));return s}function V(f,i,s){var l="";s=Math.min(f.length,s);for(var p=i;p<s;++p)l+=String.fromCharCode(f[p]&127);return l}function L(f,i,s){var l="";s=Math.min(f.length,s);for(var p=i;p<s;++p)l+=String.fromCharCode(f[p]);return l}function H(f,i,s){var l=f.length;(!i||i<0)&&(i=0),(!s||s<0||s>l)&&(s=l);for(var p="",_=i;_<s;++_)p+=U[f[_]];return p}function z(f,i,s){for(var l=f.slice(i,s),p="",_=0;_<l.length-1;_+=2)p+=String.fromCharCode(l[_]+l[_+1]*256);return p}c.prototype.slice=function(i,s){var l=this.length;i=~~i,s=s===void 0?l:~~s,i<0?(i+=l,i<0&&(i=0)):i>l&&(i=l),s<0?(s+=l,s<0&&(s=0)):s>l&&(s=l),s<i&&(s=i);var p=this.subarray(i,s);return Object.setPrototypeOf(p,c.prototype),p};function G(f,i,s){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+i>s)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(i,s,l){i=i>>>0,s=s>>>0,l||G(i,s,this.length);for(var p=this[i],_=1,F=0;++F<s&&(_*=256);)p+=this[i+F]*_;return p},c.prototype.readUintBE=c.prototype.readUIntBE=function(i,s,l){i=i>>>0,s=s>>>0,l||G(i,s,this.length);for(var p=this[i+--s],_=1;s>0&&(_*=256);)p+=this[i+--s]*_;return p},c.prototype.readUint8=c.prototype.readUInt8=function(i,s){return i=i>>>0,s||G(i,1,this.length),this[i]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(i,s){return i=i>>>0,s||G(i,2,this.length),this[i]|this[i+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(i,s){return i=i>>>0,s||G(i,2,this.length),this[i]<<8|this[i+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(i,s){return i=i>>>0,s||G(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(i,s){return i=i>>>0,s||G(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},c.prototype.readIntLE=function(i,s,l){i=i>>>0,s=s>>>0,l||G(i,s,this.length);for(var p=this[i],_=1,F=0;++F<s&&(_*=256);)p+=this[i+F]*_;return _*=128,p>=_&&(p-=Math.pow(2,8*s)),p},c.prototype.readIntBE=function(i,s,l){i=i>>>0,s=s>>>0,l||G(i,s,this.length);for(var p=s,_=1,F=this[i+--p];p>0&&(_*=256);)F+=this[i+--p]*_;return _*=128,F>=_&&(F-=Math.pow(2,8*s)),F},c.prototype.readInt8=function(i,s){return i=i>>>0,s||G(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},c.prototype.readInt16LE=function(i,s){i=i>>>0,s||G(i,2,this.length);var l=this[i]|this[i+1]<<8;return l&32768?l|4294901760:l},c.prototype.readInt16BE=function(i,s){i=i>>>0,s||G(i,2,this.length);var l=this[i+1]|this[i]<<8;return l&32768?l|4294901760:l},c.prototype.readInt32LE=function(i,s){return i=i>>>0,s||G(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},c.prototype.readInt32BE=function(i,s){return i=i>>>0,s||G(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},c.prototype.readFloatLE=function(i,s){return i=i>>>0,s||G(i,4,this.length),r.read(this,i,!0,23,4)},c.prototype.readFloatBE=function(i,s){return i=i>>>0,s||G(i,4,this.length),r.read(this,i,!1,23,4)},c.prototype.readDoubleLE=function(i,s){return i=i>>>0,s||G(i,8,this.length),r.read(this,i,!0,52,8)},c.prototype.readDoubleBE=function(i,s){return i=i>>>0,s||G(i,8,this.length),r.read(this,i,!1,52,8)};function $(f,i,s,l,p,_){if(!c.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>p||i<_)throw new RangeError('"value" argument is out of bounds');if(s+l>f.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(i,s,l,p){if(i=+i,s=s>>>0,l=l>>>0,!p){var _=Math.pow(2,8*l)-1;$(this,i,s,l,_,0)}var F=1,P=0;for(this[s]=i&255;++P<l&&(F*=256);)this[s+P]=i/F&255;return s+l},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(i,s,l,p){if(i=+i,s=s>>>0,l=l>>>0,!p){var _=Math.pow(2,8*l)-1;$(this,i,s,l,_,0)}var F=l-1,P=1;for(this[s+F]=i&255;--F>=0&&(P*=256);)this[s+F]=i/P&255;return s+l},c.prototype.writeUint8=c.prototype.writeUInt8=function(i,s,l){return i=+i,s=s>>>0,l||$(this,i,s,1,255,0),this[s]=i&255,s+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(i,s,l){return i=+i,s=s>>>0,l||$(this,i,s,2,65535,0),this[s]=i&255,this[s+1]=i>>>8,s+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(i,s,l){return i=+i,s=s>>>0,l||$(this,i,s,2,65535,0),this[s]=i>>>8,this[s+1]=i&255,s+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(i,s,l){return i=+i,s=s>>>0,l||$(this,i,s,4,4294967295,0),this[s+3]=i>>>24,this[s+2]=i>>>16,this[s+1]=i>>>8,this[s]=i&255,s+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(i,s,l){return i=+i,s=s>>>0,l||$(this,i,s,4,4294967295,0),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=i&255,s+4},c.prototype.writeIntLE=function(i,s,l,p){if(i=+i,s=s>>>0,!p){var _=Math.pow(2,8*l-1);$(this,i,s,l,_-1,-_)}var F=0,P=1,W=0;for(this[s]=i&255;++F<l&&(P*=256);)i<0&&W===0&&this[s+F-1]!==0&&(W=1),this[s+F]=(i/P>>0)-W&255;return s+l},c.prototype.writeIntBE=function(i,s,l,p){if(i=+i,s=s>>>0,!p){var _=Math.pow(2,8*l-1);$(this,i,s,l,_-1,-_)}var F=l-1,P=1,W=0;for(this[s+F]=i&255;--F>=0&&(P*=256);)i<0&&W===0&&this[s+F+1]!==0&&(W=1),this[s+F]=(i/P>>0)-W&255;return s+l},c.prototype.writeInt8=function(i,s,l){return i=+i,s=s>>>0,l||$(this,i,s,1,127,-128),i<0&&(i=255+i+1),this[s]=i&255,s+1},c.prototype.writeInt16LE=function(i,s,l){return i=+i,s=s>>>0,l||$(this,i,s,2,32767,-32768),this[s]=i&255,this[s+1]=i>>>8,s+2},c.prototype.writeInt16BE=function(i,s,l){return i=+i,s=s>>>0,l||$(this,i,s,2,32767,-32768),this[s]=i>>>8,this[s+1]=i&255,s+2},c.prototype.writeInt32LE=function(i,s,l){return i=+i,s=s>>>0,l||$(this,i,s,4,2147483647,-2147483648),this[s]=i&255,this[s+1]=i>>>8,this[s+2]=i>>>16,this[s+3]=i>>>24,s+4},c.prototype.writeInt32BE=function(i,s,l){return i=+i,s=s>>>0,l||$(this,i,s,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=i&255,s+4};function lt(f,i,s,l,p,_){if(s+l>f.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function g(f,i,s,l,p){return i=+i,s=s>>>0,p||lt(f,i,s,4),r.write(f,i,s,l,23,4),s+4}c.prototype.writeFloatLE=function(i,s,l){return g(this,i,s,!0,l)},c.prototype.writeFloatBE=function(i,s,l){return g(this,i,s,!1,l)};function at(f,i,s,l,p){return i=+i,s=s>>>0,p||lt(f,i,s,8),r.write(f,i,s,l,52,8),s+8}c.prototype.writeDoubleLE=function(i,s,l){return at(this,i,s,!0,l)},c.prototype.writeDoubleBE=function(i,s,l){return at(this,i,s,!1,l)},c.prototype.copy=function(i,s,l,p){if(!c.isBuffer(i))throw new TypeError("argument should be a Buffer");if(l||(l=0),!p&&p!==0&&(p=this.length),s>=i.length&&(s=i.length),s||(s=0),p>0&&p<l&&(p=l),p===l||i.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("sourceEnd out of bounds");p>this.length&&(p=this.length),i.length-s<p-l&&(p=i.length-s+l);var _=p-l;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,l,p):Uint8Array.prototype.set.call(i,this.subarray(l,p),s),_},c.prototype.fill=function(i,s,l,p){if(typeof i=="string"){if(typeof s=="string"?(p=s,s=0,l=this.length):typeof l=="string"&&(p=l,l=this.length),p!==void 0&&typeof p!="string")throw new TypeError("encoding must be a string");if(typeof p=="string"&&!c.isEncoding(p))throw new TypeError("Unknown encoding: "+p);if(i.length===1){var _=i.charCodeAt(0);(p==="utf8"&&_<128||p==="latin1")&&(i=_)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(s<0||this.length<s||this.length<l)throw new RangeError("Out of range index");if(l<=s)return this;s=s>>>0,l=l===void 0?this.length:l>>>0,i||(i=0);var F;if(typeof i=="number")for(F=s;F<l;++F)this[F]=i;else{var P=c.isBuffer(i)?i:c.from(i,p),W=P.length;if(W===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(F=0;F<l-s;++F)this[F+s]=P[F%W]}return this};var yt=/[^+/0-9A-Za-z-_]/g;function _t(f){if(f=f.split("=")[0],f=f.trim().replace(yt,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function k(f,i){i=i||1/0;for(var s,l=f.length,p=null,_=[],F=0;F<l;++F){if(s=f.charCodeAt(F),s>55295&&s<57344){if(!p){if(s>56319){(i-=3)>-1&&_.push(239,191,189);continue}else if(F+1===l){(i-=3)>-1&&_.push(239,191,189);continue}p=s;continue}if(s<56320){(i-=3)>-1&&_.push(239,191,189),p=s;continue}s=(p-55296<<10|s-56320)+65536}else p&&(i-=3)>-1&&_.push(239,191,189);if(p=null,s<128){if((i-=1)<0)break;_.push(s)}else if(s<2048){if((i-=2)<0)break;_.push(s>>6|192,s&63|128)}else if(s<65536){if((i-=3)<0)break;_.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((i-=4)<0)break;_.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return _}function Y(f){for(var i=[],s=0;s<f.length;++s)i.push(f.charCodeAt(s)&255);return i}function w(f,i){for(var s,l,p,_=[],F=0;F<f.length&&!((i-=2)<0);++F)s=f.charCodeAt(F),l=s>>8,p=s%256,_.push(p),_.push(l);return _}function x(f){return t.toByteArray(_t(f))}function E(f,i,s,l){for(var p=0;p<l&&!(p+s>=i.length||p>=f.length);++p)i[p+s]=f[p];return p}function T(f,i){return f instanceof i||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===i.name}function S(f){return f!==f}var U=function(){for(var f="0123456789abcdef",i=new Array(256),s=0;s<16;++s)for(var l=s*16,p=0;p<16;++p)i[l+p]=f[s]+f[p];return i}()})(Me);var $n={exports:{}};(function(e){(function(t){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,u=Math.ceil,d=Math.floor,y="[BigNumber Error] ",c=y+"Number primitive has more than 15 significant digits: ",b=1e14,B=14,N=9007199254740991,O=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],D=1e7,M=1e9;function j(q){var X,et,nt,C=g.prototype={constructor:g,toString:null,valueOf:null},gt=new g(1),st=20,ct=4,Bt=-7,xt=21,Ct=-1e7,V=1e7,L=!1,H=1,z=0,G={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},$="0123456789abcdefghijklmnopqrstuvwxyz",lt=!0;function g(w,x){var E,T,S,U,f,i,s,l,p=this;if(!(p instanceof g))return new g(w,x);if(x==null){if(w&&w._isBigNumber===!0){p.s=w.s,!w.c||w.e>V?p.c=p.e=null:w.e<Ct?p.c=[p.e=0]:(p.e=w.e,p.c=w.c.slice());return}if((i=typeof w=="number")&&w*0==0){if(p.s=1/w<0?(w=-w,-1):1,w===~~w){for(U=0,f=w;f>=10;f/=10,U++);U>V?p.c=p.e=null:(p.e=U,p.c=[w]);return}l=String(w)}else{if(!n.test(l=String(w)))return nt(p,l,i);p.s=l.charCodeAt(0)==45?(l=l.slice(1),-1):1}(U=l.indexOf("."))>-1&&(l=l.replace(".","")),(f=l.search(/e/i))>0?(U<0&&(U=f),U+=+l.slice(f+1),l=l.substring(0,f)):U<0&&(U=l.length)}else{if(ut(x,2,$.length,"Base"),x==10&&lt)return p=new g(w),k(p,st+p.e+1,ct);if(l=String(w),i=typeof w=="number"){if(w*0!=0)return nt(p,l,i,x);if(p.s=1/w<0?(l=l.slice(1),-1):1,g.DEBUG&&l.replace(/^0\.0*|\./,"").length>15)throw Error(c+w)}else p.s=l.charCodeAt(0)===45?(l=l.slice(1),-1):1;for(E=$.slice(0,x),U=f=0,s=l.length;f<s;f++)if(E.indexOf(T=l.charAt(f))<0){if(T=="."){if(f>U){U=s;continue}}else if(!S&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){S=!0,f=-1,U=0;continue}return nt(p,String(w),i,x)}i=!1,l=et(l,x,10,p.s),(U=l.indexOf("."))>-1?l=l.replace(".",""):U=l.length}for(f=0;l.charCodeAt(f)===48;f++);for(s=l.length;l.charCodeAt(--s)===48;);if(l=l.slice(f,++s)){if(s-=f,i&&g.DEBUG&&s>15&&(w>N||w!==d(w)))throw Error(c+p.s*w);if((U=U-f-1)>V)p.c=p.e=null;else if(U<Ct)p.c=[p.e=0];else{if(p.e=U,p.c=[],f=(U+1)%B,U<0&&(f+=B),f<s){for(f&&p.c.push(+l.slice(0,f)),s-=B;f<s;)p.c.push(+l.slice(f,f+=B));f=B-(l=l.slice(f)).length}else f-=s;for(;f--;l+="0");p.c.push(+l)}}else p.c=[p.e=0]}g.clone=j,g.ROUND_UP=0,g.ROUND_DOWN=1,g.ROUND_CEIL=2,g.ROUND_FLOOR=3,g.ROUND_HALF_UP=4,g.ROUND_HALF_DOWN=5,g.ROUND_HALF_EVEN=6,g.ROUND_HALF_CEIL=7,g.ROUND_HALF_FLOOR=8,g.EUCLID=9,g.config=g.set=function(w){var x,E;if(w!=null)if(typeof w=="object"){if(w.hasOwnProperty(x="DECIMAL_PLACES")&&(E=w[x],ut(E,0,M,x),st=E),w.hasOwnProperty(x="ROUNDING_MODE")&&(E=w[x],ut(E,0,8,x),ct=E),w.hasOwnProperty(x="EXPONENTIAL_AT")&&(E=w[x],E&&E.pop?(ut(E[0],-1e9,0,x),ut(E[1],0,M,x),Bt=E[0],xt=E[1]):(ut(E,-1e9,M,x),Bt=-(xt=E<0?-E:E))),w.hasOwnProperty(x="RANGE"))if(E=w[x],E&&E.pop)ut(E[0],-1e9,-1,x),ut(E[1],1,M,x),Ct=E[0],V=E[1];else if(ut(E,-1e9,M,x),E)Ct=-(V=E<0?-E:E);else throw Error(y+x+" cannot be zero: "+E);if(w.hasOwnProperty(x="CRYPTO"))if(E=w[x],E===!!E)if(E)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))L=E;else throw L=!E,Error(y+"crypto unavailable");else L=E;else throw Error(y+x+" not true or false: "+E);if(w.hasOwnProperty(x="MODULO_MODE")&&(E=w[x],ut(E,0,9,x),H=E),w.hasOwnProperty(x="POW_PRECISION")&&(E=w[x],ut(E,0,M,x),z=E),w.hasOwnProperty(x="FORMAT"))if(E=w[x],typeof E=="object")G=E;else throw Error(y+x+" not an object: "+E);if(w.hasOwnProperty(x="ALPHABET"))if(E=w[x],typeof E=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(E))lt=E.slice(0,10)=="0123456789",$=E;else throw Error(y+x+" invalid: "+E)}else throw Error(y+"Object expected: "+w);return{DECIMAL_PLACES:st,ROUNDING_MODE:ct,EXPONENTIAL_AT:[Bt,xt],RANGE:[Ct,V],CRYPTO:L,MODULO_MODE:H,POW_PRECISION:z,FORMAT:G,ALPHABET:$}},g.isBigNumber=function(w){if(!w||w._isBigNumber!==!0)return!1;if(!g.DEBUG)return!0;var x,E,T=w.c,S=w.e,U=w.s;t:if({}.toString.call(T)=="[object Array]"){if((U===1||U===-1)&&S>=-1e9&&S<=M&&S===d(S)){if(T[0]===0){if(S===0&&T.length===1)return!0;break t}if(x=(S+1)%B,x<1&&(x+=B),String(T[0]).length==x){for(x=0;x<T.length;x++)if(E=T[x],E<0||E>=b||E!==d(E))break t;if(E!==0)return!0}}}else if(T===null&&S===null&&(U===null||U===1||U===-1))return!0;throw Error(y+"Invalid BigNumber: "+w)},g.maximum=g.max=function(){return yt(arguments,-1)},g.minimum=g.min=function(){return yt(arguments,1)},g.random=function(){var w=9007199254740992,x=Math.random()*w&2097151?function(){return d(Math.random()*w)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(E){var T,S,U,f,i,s=0,l=[],p=new g(gt);if(E==null?E=st:ut(E,0,M),f=u(E/B),L)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(f*=2));s<f;)i=T[s]*131072+(T[s+1]>>>11),i>=9e15?(S=crypto.getRandomValues(new Uint32Array(2)),T[s]=S[0],T[s+1]=S[1]):(l.push(i%1e14),s+=2);s=f/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(f*=7);s<f;)i=(T[s]&31)*281474976710656+T[s+1]*1099511627776+T[s+2]*4294967296+T[s+3]*16777216+(T[s+4]<<16)+(T[s+5]<<8)+T[s+6],i>=9e15?crypto.randomBytes(7).copy(T,s):(l.push(i%1e14),s+=7);s=f/7}else throw L=!1,Error(y+"crypto unavailable");if(!L)for(;s<f;)i=x(),i<9e15&&(l[s++]=i%1e14);for(f=l[--s],E%=B,f&&E&&(i=O[B-E],l[s]=d(f/i)*i);l[s]===0;l.pop(),s--);if(s<0)l=[U=0];else{for(U=-1;l[0]===0;l.splice(0,1),U-=B);for(s=1,i=l[0];i>=10;i/=10,s++);s<B&&(U-=B-s)}return p.e=U,p.c=l,p}}(),g.sum=function(){for(var w=1,x=arguments,E=new g(x[0]);w<x.length;)E=E.plus(x[w++]);return E},et=function(){var w="0123456789";function x(E,T,S,U){for(var f,i=[0],s,l=0,p=E.length;l<p;){for(s=i.length;s--;i[s]*=T);for(i[0]+=U.indexOf(E.charAt(l++)),f=0;f<i.length;f++)i[f]>S-1&&(i[f+1]==null&&(i[f+1]=0),i[f+1]+=i[f]/S|0,i[f]%=S)}return i.reverse()}return function(E,T,S,U,f){var i,s,l,p,_,F,P,W,Z=E.indexOf("."),it=st,h=ct;for(Z>=0&&(p=z,z=0,E=E.replace(".",""),W=new g(T),F=W.pow(E.length-Z),z=p,W.c=x(ot(pt(F.c),F.e,"0"),10,S,w),W.e=W.c.length),P=x(E,T,S,f?(i=$,w):(i=w,$)),l=p=P.length;P[--p]==0;P.pop());if(!P[0])return i.charAt(0);if(Z<0?--l:(F.c=P,F.e=l,F.s=U,F=X(F,W,it,h,S),P=F.c,_=F.r,l=F.e),s=l+it+1,Z=P[s],p=S/2,_=_||s<0||P[s+1]!=null,_=h<4?(Z!=null||_)&&(h==0||h==(F.s<0?3:2)):Z>p||Z==p&&(h==4||_||h==6&&P[s-1]&1||h==(F.s<0?8:7)),s<1||!P[0])E=_?ot(i.charAt(1),-it,i.charAt(0)):i.charAt(0);else{if(P.length=s,_)for(--S;++P[--s]>S;)P[s]=0,s||(++l,P=[1].concat(P));for(p=P.length;!P[--p];);for(Z=0,E="";Z<=p;E+=i.charAt(P[Z++]));E=ot(E,l,i.charAt(0))}return E}}(),X=function(){function w(T,S,U){var f,i,s,l,p=0,_=T.length,F=S%D,P=S/D|0;for(T=T.slice();_--;)s=T[_]%D,l=T[_]/D|0,f=P*s+l*F,i=F*s+f%D*D+p,p=(i/U|0)+(f/D|0)+P*l,T[_]=i%U;return p&&(T=[p].concat(T)),T}function x(T,S,U,f){var i,s;if(U!=f)s=U>f?1:-1;else for(i=s=0;i<U;i++)if(T[i]!=S[i]){s=T[i]>S[i]?1:-1;break}return s}function E(T,S,U,f){for(var i=0;U--;)T[U]-=i,i=T[U]<S[U]?1:0,T[U]=i*f+T[U]-S[U];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,S,U,f,i){var s,l,p,_,F,P,W,Z,it,h,o,a,m,A,R,v,tt,ft=T.s==S.s?1:-1,rt=T.c,Q=S.c;if(!rt||!rt[0]||!Q||!Q[0])return new g(!T.s||!S.s||(rt?Q&&rt[0]==Q[0]:!Q)?NaN:rt&&rt[0]==0||!Q?ft*0:ft/0);for(Z=new g(ft),it=Z.c=[],l=T.e-S.e,ft=U+l+1,i||(i=b,l=J(T.e/B)-J(S.e/B),ft=ft/B|0),p=0;Q[p]==(rt[p]||0);p++);if(Q[p]>(rt[p]||0)&&l--,ft<0)it.push(1),_=!0;else{for(A=rt.length,v=Q.length,p=0,ft+=2,F=d(i/(Q[0]+1)),F>1&&(Q=w(Q,F,i),rt=w(rt,F,i),v=Q.length,A=rt.length),m=v,h=rt.slice(0,v),o=h.length;o<v;h[o++]=0);tt=Q.slice(),tt=[0].concat(tt),R=Q[0],Q[1]>=i/2&&R++;do{if(F=0,s=x(Q,h,v,o),s<0){if(a=h[0],v!=o&&(a=a*i+(h[1]||0)),F=d(a/R),F>1)for(F>=i&&(F=i-1),P=w(Q,F,i),W=P.length,o=h.length;x(P,h,W,o)==1;)F--,E(P,v<W?tt:Q,W,i),W=P.length,s=1;else F==0&&(s=F=1),P=Q.slice(),W=P.length;if(W<o&&(P=[0].concat(P)),E(h,P,o,i),o=h.length,s==-1)for(;x(Q,h,v,o)<1;)F++,E(h,v<o?tt:Q,o,i),o=h.length}else s===0&&(F++,h=[0]);it[p++]=F,h[0]?h[o++]=rt[m]||0:(h=[rt[m]],o=1)}while((m++<A||h[0]!=null)&&ft--);_=h[0]!=null,it[0]||it.splice(0,1)}if(i==b){for(p=1,ft=it[0];ft>=10;ft/=10,p++);k(Z,U+(Z.e=p+l*B-1)+1,f,_)}else Z.e=l,Z.r=+_;return Z}}();function at(w,x,E,T){var S,U,f,i,s;if(E==null?E=ct:ut(E,0,8),!w.c)return w.toString();if(S=w.c[0],f=w.e,x==null)s=pt(w.c),s=T==1||T==2&&(f<=Bt||f>=xt)?St(s,f):ot(s,f,"0");else if(w=k(new g(w),x,E),U=w.e,s=pt(w.c),i=s.length,T==1||T==2&&(x<=U||U<=Bt)){for(;i<x;s+="0",i++);s=St(s,U)}else if(x-=f,s=ot(s,U,"0"),U+1>i){if(--x>0)for(s+=".";x--;s+="0");}else if(x+=U-i,x>0)for(U+1==i&&(s+=".");x--;s+="0");return w.s<0&&S?"-"+s:s}function yt(w,x){for(var E,T,S=1,U=new g(w[0]);S<w.length;S++)T=new g(w[S]),(!T.s||(E=At(U,T))===x||E===0&&U.s===x)&&(U=T);return U}function _t(w,x,E){for(var T=1,S=x.length;!x[--S];x.pop());for(S=x[0];S>=10;S/=10,T++);return(E=T+E*B-1)>V?w.c=w.e=null:E<Ct?w.c=[w.e=0]:(w.e=E,w.c=x),w}nt=function(){var w=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,E=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,S=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(U,f,i,s){var l,p=i?f:f.replace(S,"");if(T.test(p))U.s=isNaN(p)?null:p<0?-1:1;else{if(!i&&(p=p.replace(w,function(_,F,P){return l=(P=P.toLowerCase())=="x"?16:P=="b"?2:8,!s||s==l?F:_}),s&&(l=s,p=p.replace(x,"$1").replace(E,"0.$1")),f!=p))return new g(p,l);if(g.DEBUG)throw Error(y+"Not a"+(s?" base "+s:"")+" number: "+f);U.s=null}U.c=U.e=null}}();function k(w,x,E,T){var S,U,f,i,s,l,p,_=w.c,F=O;if(_){t:{for(S=1,i=_[0];i>=10;i/=10,S++);if(U=x-S,U<0)U+=B,f=x,s=_[l=0],p=d(s/F[S-f-1]%10);else if(l=u((U+1)/B),l>=_.length)if(T){for(;_.length<=l;_.push(0));s=p=0,S=1,U%=B,f=U-B+1}else break t;else{for(s=i=_[l],S=1;i>=10;i/=10,S++);U%=B,f=U-B+S,p=f<0?0:d(s/F[S-f-1]%10)}if(T=T||x<0||_[l+1]!=null||(f<0?s:s%F[S-f-1]),T=E<4?(p||T)&&(E==0||E==(w.s<0?3:2)):p>5||p==5&&(E==4||T||E==6&&(U>0?f>0?s/F[S-f]:0:_[l-1])%10&1||E==(w.s<0?8:7)),x<1||!_[0])return _.length=0,T?(x-=w.e+1,_[0]=F[(B-x%B)%B],w.e=-x||0):_[0]=w.e=0,w;if(U==0?(_.length=l,i=1,l--):(_.length=l+1,i=F[B-U],_[l]=f>0?d(s/F[S-f]%F[f])*i:0),T)for(;;)if(l==0){for(U=1,f=_[0];f>=10;f/=10,U++);for(f=_[0]+=i,i=1;f>=10;f/=10,i++);U!=i&&(w.e++,_[0]==b&&(_[0]=1));break}else{if(_[l]+=i,_[l]!=b)break;_[l--]=0,i=1}for(U=_.length;_[--U]===0;_.pop());}w.e>V?w.c=w.e=null:w.e<Ct&&(w.c=[w.e=0])}return w}function Y(w){var x,E=w.e;return E===null?w.toString():(x=pt(w.c),x=E<=Bt||E>=xt?St(x,E):ot(x,E,"0"),w.s<0?"-"+x:x)}return C.absoluteValue=C.abs=function(){var w=new g(this);return w.s<0&&(w.s=1),w},C.comparedTo=function(w,x){return At(this,new g(w,x))},C.decimalPlaces=C.dp=function(w,x){var E,T,S,U=this;if(w!=null)return ut(w,0,M),x==null?x=ct:ut(x,0,8),k(new g(U),w+U.e+1,x);if(!(E=U.c))return null;if(T=((S=E.length-1)-J(this.e/B))*B,S=E[S])for(;S%10==0;S/=10,T--);return T<0&&(T=0),T},C.dividedBy=C.div=function(w,x){return X(this,new g(w,x),st,ct)},C.dividedToIntegerBy=C.idiv=function(w,x){return X(this,new g(w,x),0,1)},C.exponentiatedBy=C.pow=function(w,x){var E,T,S,U,f,i,s,l,p,_=this;if(w=new g(w),w.c&&!w.isInteger())throw Error(y+"Exponent not an integer: "+Y(w));if(x!=null&&(x=new g(x)),i=w.e>14,!_.c||!_.c[0]||_.c[0]==1&&!_.e&&_.c.length==1||!w.c||!w.c[0])return p=new g(Math.pow(+Y(_),i?w.s*(2-K(w)):+Y(w))),x?p.mod(x):p;if(s=w.s<0,x){if(x.c?!x.c[0]:!x.s)return new g(NaN);T=!s&&_.isInteger()&&x.isInteger(),T&&(_=_.mod(x))}else{if(w.e>9&&(_.e>0||_.e<-1||(_.e==0?_.c[0]>1||i&&_.c[1]>=24e7:_.c[0]<8e13||i&&_.c[0]<=9999975e7)))return U=_.s<0&&K(w)?-0:0,_.e>-1&&(U=1/U),new g(s?1/U:U);z&&(U=u(z/B+2))}for(i?(E=new g(.5),s&&(w.s=1),l=K(w)):(S=Math.abs(+Y(w)),l=S%2),p=new g(gt);;){if(l){if(p=p.times(_),!p.c)break;U?p.c.length>U&&(p.c.length=U):T&&(p=p.mod(x))}if(S){if(S=d(S/2),S===0)break;l=S%2}else if(w=w.times(E),k(w,w.e+1,1),w.e>14)l=K(w);else{if(S=+Y(w),S===0)break;l=S%2}_=_.times(_),U?_.c&&_.c.length>U&&(_.c.length=U):T&&(_=_.mod(x))}return T?p:(s&&(p=gt.div(p)),x?p.mod(x):U?k(p,z,ct,f):p)},C.integerValue=function(w){var x=new g(this);return w==null?w=ct:ut(w,0,8),k(x,x.e+1,w)},C.isEqualTo=C.eq=function(w,x){return At(this,new g(w,x))===0},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(w,x){return At(this,new g(w,x))>0},C.isGreaterThanOrEqualTo=C.gte=function(w,x){return(x=At(this,new g(w,x)))===1||x===0},C.isInteger=function(){return!!this.c&&J(this.e/B)>this.c.length-2},C.isLessThan=C.lt=function(w,x){return At(this,new g(w,x))<0},C.isLessThanOrEqualTo=C.lte=function(w,x){return(x=At(this,new g(w,x)))===-1||x===0},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&this.c[0]==0},C.minus=function(w,x){var E,T,S,U,f=this,i=f.s;if(w=new g(w,x),x=w.s,!i||!x)return new g(NaN);if(i!=x)return w.s=-x,f.plus(w);var s=f.e/B,l=w.e/B,p=f.c,_=w.c;if(!s||!l){if(!p||!_)return p?(w.s=-x,w):new g(_?f:NaN);if(!p[0]||!_[0])return _[0]?(w.s=-x,w):new g(p[0]?f:ct==3?-0:0)}if(s=J(s),l=J(l),p=p.slice(),i=s-l){for((U=i<0)?(i=-i,S=p):(l=s,S=_),S.reverse(),x=i;x--;S.push(0));S.reverse()}else for(T=(U=(i=p.length)<(x=_.length))?i:x,i=x=0;x<T;x++)if(p[x]!=_[x]){U=p[x]<_[x];break}if(U&&(S=p,p=_,_=S,w.s=-w.s),x=(T=_.length)-(E=p.length),x>0)for(;x--;p[E++]=0);for(x=b-1;T>i;){if(p[--T]<_[T]){for(E=T;E&&!p[--E];p[E]=x);--p[E],p[T]+=b}p[T]-=_[T]}for(;p[0]==0;p.splice(0,1),--l);return p[0]?_t(w,p,l):(w.s=ct==3?-1:1,w.c=[w.e=0],w)},C.modulo=C.mod=function(w,x){var E,T,S=this;return w=new g(w,x),!S.c||!w.s||w.c&&!w.c[0]?new g(NaN):!w.c||S.c&&!S.c[0]?new g(S):(H==9?(T=w.s,w.s=1,E=X(S,w,0,3),w.s=T,E.s*=T):E=X(S,w,0,H),w=S.minus(E.times(w)),!w.c[0]&&H==1&&(w.s=S.s),w)},C.multipliedBy=C.times=function(w,x){var E,T,S,U,f,i,s,l,p,_,F,P,W,Z,it,h=this,o=h.c,a=(w=new g(w,x)).c;if(!o||!a||!o[0]||!a[0])return!h.s||!w.s||o&&!o[0]&&!a||a&&!a[0]&&!o?w.c=w.e=w.s=null:(w.s*=h.s,!o||!a?w.c=w.e=null:(w.c=[0],w.e=0)),w;for(T=J(h.e/B)+J(w.e/B),w.s*=h.s,s=o.length,_=a.length,s<_&&(W=o,o=a,a=W,S=s,s=_,_=S),S=s+_,W=[];S--;W.push(0));for(Z=b,it=D,S=_;--S>=0;){for(E=0,F=a[S]%it,P=a[S]/it|0,f=s,U=S+f;U>S;)l=o[--f]%it,p=o[f]/it|0,i=P*l+p*F,l=F*l+i%it*it+W[U]+E,E=(l/Z|0)+(i/it|0)+P*p,W[U--]=l%Z;W[U]=E}return E?++T:W.splice(0,1),_t(w,W,T)},C.negated=function(){var w=new g(this);return w.s=-w.s||null,w},C.plus=function(w,x){var E,T=this,S=T.s;if(w=new g(w,x),x=w.s,!S||!x)return new g(NaN);if(S!=x)return w.s=-x,T.minus(w);var U=T.e/B,f=w.e/B,i=T.c,s=w.c;if(!U||!f){if(!i||!s)return new g(S/0);if(!i[0]||!s[0])return s[0]?w:new g(i[0]?T:S*0)}if(U=J(U),f=J(f),i=i.slice(),S=U-f){for(S>0?(f=U,E=s):(S=-S,E=i),E.reverse();S--;E.push(0));E.reverse()}for(S=i.length,x=s.length,S-x<0&&(E=s,s=i,i=E,x=S),S=0;x;)S=(i[--x]=i[x]+s[x]+S)/b|0,i[x]=b===i[x]?0:i[x]%b;return S&&(i=[S].concat(i),++f),_t(w,i,f)},C.precision=C.sd=function(w,x){var E,T,S,U=this;if(w!=null&&w!==!!w)return ut(w,1,M),x==null?x=ct:ut(x,0,8),k(new g(U),w,x);if(!(E=U.c))return null;if(S=E.length-1,T=S*B+1,S=E[S]){for(;S%10==0;S/=10,T--);for(S=E[0];S>=10;S/=10,T++);}return w&&U.e+1>T&&(T=U.e+1),T},C.shiftedBy=function(w){return ut(w,-9007199254740991,N),this.times("1e"+w)},C.squareRoot=C.sqrt=function(){var w,x,E,T,S,U=this,f=U.c,i=U.s,s=U.e,l=st+4,p=new g("0.5");if(i!==1||!f||!f[0])return new g(!i||i<0&&(!f||f[0])?NaN:f?U:1/0);if(i=Math.sqrt(+Y(U)),i==0||i==1/0?(x=pt(f),(x.length+s)%2==0&&(x+="0"),i=Math.sqrt(+x),s=J((s+1)/2)-(s<0||s%2),i==1/0?x="5e"+s:(x=i.toExponential(),x=x.slice(0,x.indexOf("e")+1)+s),E=new g(x)):E=new g(i+""),E.c[0]){for(s=E.e,i=s+l,i<3&&(i=0);;)if(S=E,E=p.times(S.plus(X(U,S,l,1))),pt(S.c).slice(0,i)===(x=pt(E.c)).slice(0,i))if(E.e<s&&--i,x=x.slice(i-3,i+1),x=="9999"||!T&&x=="4999"){if(!T&&(k(S,S.e+st+2,0),S.times(S).eq(U))){E=S;break}l+=4,i+=4,T=1}else{(!+x||!+x.slice(1)&&x.charAt(0)=="5")&&(k(E,E.e+st+2,1),w=!E.times(E).eq(U));break}}return k(E,E.e+st+1,ct,w)},C.toExponential=function(w,x){return w!=null&&(ut(w,0,M),w++),at(this,w,x,1)},C.toFixed=function(w,x){return w!=null&&(ut(w,0,M),w=w+this.e+1),at(this,w,x)},C.toFormat=function(w,x,E){var T,S=this;if(E==null)w!=null&&x&&typeof x=="object"?(E=x,x=null):w&&typeof w=="object"?(E=w,w=x=null):E=G;else if(typeof E!="object")throw Error(y+"Argument not an object: "+E);if(T=S.toFixed(w,x),S.c){var U,f=T.split("."),i=+E.groupSize,s=+E.secondaryGroupSize,l=E.groupSeparator||"",p=f[0],_=f[1],F=S.s<0,P=F?p.slice(1):p,W=P.length;if(s&&(U=i,i=s,s=U,W-=U),i>0&&W>0){for(U=W%i||i,p=P.substr(0,U);U<W;U+=i)p+=l+P.substr(U,i);s>0&&(p+=l+P.slice(U)),F&&(p="-"+p)}T=_?p+(E.decimalSeparator||"")+((s=+E.fractionGroupSize)?_.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"+(E.fractionGroupSeparator||"")):_):p}return(E.prefix||"")+T+(E.suffix||"")},C.toFraction=function(w){var x,E,T,S,U,f,i,s,l,p,_,F,P=this,W=P.c;if(w!=null&&(i=new g(w),!i.isInteger()&&(i.c||i.s!==1)||i.lt(gt)))throw Error(y+"Argument "+(i.isInteger()?"out of range: ":"not an integer: ")+Y(i));if(!W)return new g(P);for(x=new g(gt),l=E=new g(gt),T=s=new g(gt),F=pt(W),U=x.e=F.length-P.e-1,x.c[0]=O[(f=U%B)<0?B+f:f],w=!w||i.comparedTo(x)>0?U>0?x:l:i,f=V,V=1/0,i=new g(F),s.c[0]=0;p=X(i,x,0,1),S=E.plus(p.times(T)),S.comparedTo(w)!=1;)E=T,T=S,l=s.plus(p.times(S=l)),s=S,x=i.minus(p.times(S=x)),i=S;return S=X(w.minus(E),T,0,1),s=s.plus(S.times(l)),E=E.plus(S.times(T)),s.s=l.s=P.s,U=U*2,_=X(l,T,U,ct).minus(P).abs().comparedTo(X(s,E,U,ct).minus(P).abs())<1?[l,T]:[s,E],V=f,_},C.toNumber=function(){return+Y(this)},C.toPrecision=function(w,x){return w!=null&&ut(w,1,M),at(this,w,x,2)},C.toString=function(w){var x,E=this,T=E.s,S=E.e;return S===null?T?(x="Infinity",T<0&&(x="-"+x)):x="NaN":(w==null?x=S<=Bt||S>=xt?St(pt(E.c),S):ot(pt(E.c),S,"0"):w===10&&lt?(E=k(new g(E),st+S+1,ct),x=ot(pt(E.c),E.e,"0")):(ut(w,2,$.length,"Base"),x=et(ot(pt(E.c),S,"0"),10,w,T,!0)),T<0&&E.c[0]&&(x="-"+x)),x},C.valueOf=C.toJSON=function(){return Y(this)},C._isBigNumber=!0,q!=null&&g.set(q),g}function J(q){var X=q|0;return q>0||q===X?X:X-1}function pt(q){for(var X,et,nt=1,C=q.length,gt=q[0]+"";nt<C;){for(X=q[nt++]+"",et=B-X.length;et--;X="0"+X);gt+=X}for(C=gt.length;gt.charCodeAt(--C)===48;);return gt.slice(0,C+1||1)}function At(q,X){var et,nt,C=q.c,gt=X.c,st=q.s,ct=X.s,Bt=q.e,xt=X.e;if(!st||!ct)return null;if(et=C&&!C[0],nt=gt&&!gt[0],et||nt)return et?nt?0:-ct:st;if(st!=ct)return st;if(et=st<0,nt=Bt==xt,!C||!gt)return nt?0:!C^et?1:-1;if(!nt)return Bt>xt^et?1:-1;for(ct=(Bt=C.length)<(xt=gt.length)?Bt:xt,st=0;st<ct;st++)if(C[st]!=gt[st])return C[st]>gt[st]^et?1:-1;return Bt==xt?0:Bt>xt^et?1:-1}function ut(q,X,et,nt){if(q<X||q>et||q!==d(q))throw Error(y+(nt||"Argument")+(typeof q=="number"?q<X||q>et?" out of range: ":" not an integer: ":" not a primitive number: ")+String(q))}function K(q){var X=q.c.length-1;return J(q.e/B)==X&&q.c[X]%2!=0}function St(q,X){return(q.length>1?q.charAt(0)+"."+q.slice(1):q)+(X<0?"e":"e+")+X}function ot(q,X,et){var nt,C;if(X<0){for(C=et+".";++X;C+=et);q=C+q}else if(nt=q.length,++X>nt){for(C=et,X-=nt;--X;C+=et);q+=C}else X<nt&&(q=q.slice(0,X)+"."+q.slice(X));return q}r=j(),r.default=r.BigNumber=r,e.exports?e.exports=r:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=r)})(we)})($n);var Ze=$n.exports,co=function(t,r,n){var u=new t.Uint8Array(n),d=r.pushInt,y=r.pushInt32,c=r.pushInt32Neg,b=r.pushInt64,B=r.pushInt64Neg,N=r.pushFloat,O=r.pushFloatSingle,D=r.pushFloatDouble,M=r.pushTrue,j=r.pushFalse,J=r.pushUndefined,pt=r.pushNull,At=r.pushInfinity,ut=r.pushInfinityNeg,K=r.pushNaN,St=r.pushNaNNeg,ot=r.pushArrayStart,q=r.pushArrayStartFixed,X=r.pushArrayStartFixed32,et=r.pushArrayStartFixed64,nt=r.pushObjectStart,C=r.pushObjectStartFixed,gt=r.pushObjectStartFixed32,st=r.pushObjectStartFixed64,ct=r.pushByteString,Bt=r.pushByteStringStart,xt=r.pushUtf8String,Ct=r.pushUtf8StringStart,V=r.pushSimpleUnassigned,L=r.pushTagStart,H=r.pushTagStart4,z=r.pushTagStart8,G=r.pushTagUnassigned,$=r.pushBreak,lt=t.Math.pow,g=0,at=0,yt=0;function _t(I){for(I=I|0,g=0,at=I;(g|0)<(at|0)&&(yt=Cu[u[g]&255](u[g]|0)|0,!((yt|0)>0)););return yt|0}function k(I){return I=I|0,((g|0)+(I|0)|0)<(at|0)?0:1}function Y(I){return I=I|0,u[I|0]<<8|u[I+1|0]|0}function w(I){return I=I|0,u[I|0]<<24|u[I+1|0]<<16|u[I+2|0]<<8|u[I+3|0]|0}function x(I){return I=I|0,d(I|0),g=g+1|0,0}function E(I){return I=I|0,k(1)|0?1:(d(u[g+1|0]|0),g=g+2|0,0)}function T(I){return I=I|0,k(2)|0?1:(d(Y(g+1|0)|0),g=g+3|0,0)}function S(I){return I=I|0,k(4)|0?1:(y(Y(g+1|0)|0,Y(g+3|0)|0),g=g+5|0,0)}function U(I){return I=I|0,k(8)|0?1:(b(Y(g+1|0)|0,Y(g+3|0)|0,Y(g+5|0)|0,Y(g+7|0)|0),g=g+9|0,0)}function f(I){return I=I|0,d(-1-(I-32|0)|0),g=g+1|0,0}function i(I){return I=I|0,k(1)|0?1:(d(-1-(u[g+1|0]|0)|0),g=g+2|0,0)}function s(I){I=I|0;var dt=0;return k(2)|0?1:(dt=Y(g+1|0)|0,d(-1-(dt|0)|0),g=g+3|0,0)}function l(I){return I=I|0,k(4)|0?1:(c(Y(g+1|0)|0,Y(g+3|0)|0),g=g+5|0,0)}function p(I){return I=I|0,k(8)|0?1:(B(Y(g+1|0)|0,Y(g+3|0)|0,Y(g+5|0)|0,Y(g+7|0)|0),g=g+9|0,0)}function _(I){I=I|0;var dt=0,wt=0,ht=0;return ht=I-64|0,k(ht|0)|0?1:(dt=g+1|0,wt=(g+1|0)+(ht|0)|0,ct(dt|0,wt|0),g=wt|0,0)}function F(I){I=I|0;var dt=0,wt=0,ht=0;return k(1)|0||(ht=u[g+1|0]|0,dt=g+2|0,wt=(g+2|0)+(ht|0)|0,k(ht+1|0)|0)?1:(ct(dt|0,wt|0),g=wt|0,0)}function P(I){I=I|0;var dt=0,wt=0,ht=0;return k(2)|0||(ht=Y(g+1|0)|0,dt=g+3|0,wt=(g+3|0)+(ht|0)|0,k(ht+2|0)|0)?1:(ct(dt|0,wt|0),g=wt|0,0)}function W(I){I=I|0;var dt=0,wt=0,ht=0;return k(4)|0||(ht=w(g+1|0)|0,dt=g+5|0,wt=(g+5|0)+(ht|0)|0,k(ht+4|0)|0)?1:(ct(dt|0,wt|0),g=wt|0,0)}function Z(I){return I=I|0,1}function it(I){return I=I|0,Bt(),g=g+1|0,0}function h(I){I=I|0;var dt=0,wt=0,ht=0;return ht=I-96|0,k(ht|0)|0?1:(dt=g+1|0,wt=(g+1|0)+(ht|0)|0,xt(dt|0,wt|0),g=wt|0,0)}function o(I){I=I|0;var dt=0,wt=0,ht=0;return k(1)|0||(ht=u[g+1|0]|0,dt=g+2|0,wt=(g+2|0)+(ht|0)|0,k(ht+1|0)|0)?1:(xt(dt|0,wt|0),g=wt|0,0)}function a(I){I=I|0;var dt=0,wt=0,ht=0;return k(2)|0||(ht=Y(g+1|0)|0,dt=g+3|0,wt=(g+3|0)+(ht|0)|0,k(ht+2|0)|0)?1:(xt(dt|0,wt|0),g=wt|0,0)}function m(I){I=I|0;var dt=0,wt=0,ht=0;return k(4)|0||(ht=w(g+1|0)|0,dt=g+5|0,wt=(g+5|0)+(ht|0)|0,k(ht+4|0)|0)?1:(xt(dt|0,wt|0),g=wt|0,0)}function A(I){return I=I|0,1}function R(I){return I=I|0,Ct(),g=g+1|0,0}function v(I){return I=I|0,q(I-128|0),g=g+1|0,0}function tt(I){return I=I|0,k(1)|0?1:(q(u[g+1|0]|0),g=g+2|0,0)}function ft(I){return I=I|0,k(2)|0?1:(q(Y(g+1|0)|0),g=g+3|0,0)}function rt(I){return I=I|0,k(4)|0?1:(X(Y(g+1|0)|0,Y(g+3|0)|0),g=g+5|0,0)}function Q(I){return I=I|0,k(8)|0?1:(et(Y(g+1|0)|0,Y(g+3|0)|0,Y(g+5|0)|0,Y(g+7|0)|0),g=g+9|0,0)}function mt(I){return I=I|0,ot(),g=g+1|0,0}function Tt(I){I=I|0;var dt=0;return dt=I-160|0,k(dt|0)|0?1:(C(dt|0),g=g+1|0,0)}function bu(I){return I=I|0,k(1)|0?1:(C(u[g+1|0]|0),g=g+2|0,0)}function Eu(I){return I=I|0,k(2)|0?1:(C(Y(g+1|0)|0),g=g+3|0,0)}function _u(I){return I=I|0,k(4)|0?1:(gt(Y(g+1|0)|0,Y(g+3|0)|0),g=g+5|0,0)}function Iu(I){return I=I|0,k(8)|0?1:(st(Y(g+1|0)|0,Y(g+3|0)|0,Y(g+5|0)|0,Y(g+7|0)|0),g=g+9|0,0)}function Au(I){return I=I|0,nt(),g=g+1|0,0}function Ne(I){return I=I|0,L(I-192|0|0),g=g+1|0,0}function Vu(I){return I=I|0,L(I|0),g=g+1|0,0}function qu(I){return I=I|0,L(I|0),g=g+1|0,0}function Ju(I){return I=I|0,L(I|0),g=g+1|0,0}function Xu(I){return I=I|0,L(I|0),g=g+1|0,0}function vt(I){return I=I|0,L(I-192|0|0),g=g+1|0,0}function Zu(I){return I=I|0,L(I|0),g=g+1|0,0}function ju(I){return I=I|0,L(I|0),g=g+1|0,0}function Qu(I){return I=I|0,L(I|0),g=g+1|0,0}function Bu(I){return I=I|0,k(1)|0?1:(L(u[g+1|0]|0),g=g+2|0,0)}function Su(I){return I=I|0,k(2)|0?1:(L(Y(g+1|0)|0),g=g+3|0,0)}function Tu(I){return I=I|0,k(4)|0?1:(H(Y(g+1|0)|0,Y(g+3|0)|0),g=g+5|0,0)}function Uu(I){return I=I|0,k(8)|0?1:(z(Y(g+1|0)|0,Y(g+3|0)|0,Y(g+5|0)|0,Y(g+7|0)|0),g=g+9|0,0)}function Ut(I){return I=I|0,V((I|0)-224|0),g=g+1|0,0}function Nu(I){return I=I|0,j(),g=g+1|0,0}function Fu(I){return I=I|0,M(),g=g+1|0,0}function vu(I){return I=I|0,pt(),g=g+1|0,0}function Ru(I){return I=I|0,J(),g=g+1|0,0}function Ou(I){return I=I|0,k(1)|0?1:(V(u[g+1|0]|0),g=g+2|0,0)}function Lu(I){I=I|0;var dt=0,wt=0,ht=1,dr=0,He=0,t0=0;return k(2)|0?1:(dt=u[g+1|0]|0,wt=u[g+2|0]|0,(dt|0)&128&&(ht=-1),dr=+(((dt|0)&124)>>2),He=+(((dt|0)&3)<<8|wt),+dr==0?N(+(+ht*5960464477539063e-23*+He)):+dr==31?+ht==1?+He>0?K():At():+He>0?St():ut():N(+(+ht*lt(2,+(+dr-25))*+(1024+He))),g=g+3|0,0)}function Du(I){return I=I|0,k(4)|0?1:(O(u[g+1|0]|0,u[g+2|0]|0,u[g+3|0]|0,u[g+4|0]|0),g=g+5|0,0)}function Pu(I){return I=I|0,k(8)|0?1:(D(u[g+1|0]|0,u[g+2|0]|0,u[g+3|0]|0,u[g+4|0]|0,u[g+5|0]|0,u[g+6|0]|0,u[g+7|0]|0,u[g+8|0]|0),g=g+9|0,0)}function It(I){return I=I|0,1}function Mu(I){return I=I|0,$(),g=g+1|0,0}var Cu=[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,E,T,S,U,It,It,It,It,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,i,s,l,p,It,It,It,It,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,F,P,W,Z,It,It,It,it,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,o,a,m,A,It,It,It,R,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,tt,ft,rt,Q,It,It,It,mt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,Tt,bu,Eu,_u,Iu,It,It,It,Au,Ne,Ne,Ne,Ne,Ne,Ne,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,Bu,Su,Tu,Uu,It,It,It,It,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Ut,Nu,Fu,vu,Ru,Ou,Lu,Du,Pu,It,It,It,Mu];return{parse:_t}},je={},Ot={};const Ir=Ze.BigNumber;Ot.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},Ot.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},Ot.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},Ot.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},Ot.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},Ot.SHIFT32=Math.pow(2,32),Ot.SHIFT16=Math.pow(2,16),Ot.MAX_SAFE_HIGH=2097151,Ot.NEG_ONE=new Ir(-1),Ot.TEN=new Ir(10),Ot.TWO=new Ir(2),Ot.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5},function(e){const{Buffer:t}=Me,r=Ze.BigNumber,n=Ot,u=n.SHIFT32,d=n.SHIFT16,y=2097151;e.parseHalf=function(B){var N,O,D;return D=B[0]&128?-1:1,N=(B[0]&124)>>2,O=(B[0]&3)<<8|B[1],N?N===31?D*(O?NaN:1/0):D*Math.pow(2,N-25)*(1024+O):D*5960464477539063e-23*O};function c(b){return b<16?"0"+b.toString(16):b.toString(16)}e.arrayBufferToBignumber=function(b){const B=b.byteLength;let N="";for(let O=0;O<B;O++)N+=c(b[O]);return new r(N,16)},e.buildMap=b=>{const B=new Map,N=Object.keys(b),O=N.length;for(let D=0;D<O;D++)B.set(N[D],b[N[D]]);return B},e.buildInt32=(b,B)=>b*d+B,e.buildInt64=(b,B,N,O)=>{const D=e.buildInt32(b,B),M=e.buildInt32(N,O);return D>y?new r(D).times(u).plus(M):D*u+M},e.writeHalf=function(B,N){const O=t.allocUnsafe(4);O.writeFloatBE(N,0);const D=O.readUInt32BE(0);if(D&8191)return!1;var M=D>>16&32768;const j=D>>23&255,J=D&8388607;if(j>=113&&j<=142)M+=(j-112<<10)+(J>>13);else if(j>=103&&j<113){if(J&(1<<126-j)-1)return!1;M+=J+8388608>>126-j}else return!1;return B.writeUInt16BE(M,0),!0},e.keySorter=function(b,B){var N=b[0].byteLength,O=B[0].byteLength;return N>O?1:O>N?-1:b[0].compare(B[0])},e.isNegativeZero=b=>b===0&&1/b<0,e.nextPowerOf2=b=>{let B=0;if(b&&!(b&b-1))return b;for(;b!==0;)b>>=1,B+=1;return 1<<B}}(je);const Ar=Ot,fo=Ar.MT,Qe=Ar.SIMPLE,Br=Ar.SYMS;var Hn=class yn{constructor(t){if(typeof t!="number")throw new Error("Invalid Simple type: "+typeof t);if(t<0||t>255||(t|0)!==t)throw new Error("value must be a small positive integer: "+t);this.value=t}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(t){return t._pushInt(this.value,fo.SIMPLE_FLOAT)}static isSimple(t){return t instanceof yn}static decode(t,r){switch(r==null&&(r=!0),t){case Qe.FALSE:return!1;case Qe.TRUE:return!0;case Qe.NULL:return r?null:Br.NULL;case Qe.UNDEFINED:return r?void 0:Br.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return Br.BREAK;default:return new yn(t)}}},Kn=class gn{constructor(t,r,n){if(this.tag=t,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(t){return t._pushTag(this.tag),t.pushAny(this.value)}convert(t){var r,n;if(n=t?.[this.tag],typeof n!="function"&&(n=gn["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(gn,this.value)}catch(u){return r=u,this.err=r,this}}};const zn=self.location?self.location.protocol+"//"+self.location.host:"",Sr=self.URL;let ho=class{constructor(t="",r=zn){this.super=new Sr(t,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set origin(t){this.super.origin=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set searchParams(t){this.super.searchParams=t}set username(t){this.super.username=t}createObjectURL(t){return this.super.createObjectURL(t)}revokeObjectURL(t){this.super.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function lo(e){if(typeof e=="string")return new Sr(e).toString();if(!(e instanceof Sr)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",u=e.protocol?e.protocol+"//":"",d=e.host||"",y=e.hostname||"",c=e.search||(e.query?"?"+e.query:""),b=e.hash||"",B=e.pathname||"",N=e.path||B+c;return`${u}${t||r}${d||y+n}${N}${b}`}}var Yn={URLWithLegacySupport:ho,URLSearchParams:self.URLSearchParams,defaultBase:zn,format:lo};const{URLWithLegacySupport:$u,format:Hu}=Yn,{URLWithLegacySupport:po,format:Ku,URLSearchParams:zu,defaultBase:Yu}=Yn;var Wn={URL:po};const{Buffer:Ie}=Me,Vn=ve,wo=Ze.BigNumber,yo=co,Dt=je,bt=Ot,go=Hn,xo=Kn,{URL:mo}=Wn;let Tr=class xn{constructor(t){t=t||{},!t.size||t.size<65536?t.size=65536:t.size=Dt.nextPowerOf2(t.size),this._heap=new ArrayBuffer(t.size),this._heap8=new Uint8Array(this._heap),this._buffer=Ie.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>Dt.arrayBufferToBignumber(r),3:r=>bt.NEG_ONE.minus(Dt.arrayBufferToBignumber(r)),4:r=>bt.TEN.pow(r[0]).times(r[1]),5:r=>bt.TWO.pow(r[0]).times(r[1]),32:r=>new mo(r),35:r=>new RegExp(r)},t.tags),this.parser=yo(we,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var t=this._parents.pop();if(t.length>0)throw new Error(`Missing ${t.length} elements`);switch(t.type){case bt.PARENT.TAG:this._push(this.createTag(t.ref[0],t.ref[1]));break;case bt.PARENT.BYTE_STRING:this._push(this.createByteString(t.ref,t.length));break;case bt.PARENT.UTF8_STRING:this._push(this.createUtf8String(t.ref,t.length));break;case bt.PARENT.MAP:if(t.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(t.ref,t.length));break;case bt.PARENT.OBJECT:if(t.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(t.ref,t.length));break;case bt.PARENT.ARRAY:this._push(this.createArray(t.ref,t.length));break}this._currentParent&&this._currentParent.type===bt.PARENT.TAG&&this._dec()}_dec(){const t=this._currentParent;t.length<0||(t.length--,t.length===0&&this._closeParent())}_push(t,r){const n=this._currentParent;switch(n.values++,n.type){case bt.PARENT.ARRAY:case bt.PARENT.BYTE_STRING:case bt.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=t:this._ref.push(t),this._dec();break;case bt.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=t,n.tmpKey=null,this._dec()):(n.tmpKey=t,typeof n.tmpKey!="string"&&(n.type=bt.PARENT.MAP,n.ref=Dt.buildMap(n.ref)));break;case bt.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,t),n.tmpKey=null,this._dec()):n.tmpKey=t;break;case bt.PARENT.TAG:this._ref.push(t),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(t,r,n){this._parents[this._depth]={type:r,length:n,ref:t,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:bt.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(t,r){const n=this._knownTags[t];return n?n(r):new xo(t,r)}createMap(t,r){return t}createObject(t,r){return t}createArray(t,r){return t}createByteString(t,r){return Ie.concat(t)}createByteStringFromHeap(t,r){return t===r?Ie.alloc(0):Ie.from(this._heap.slice(t,r))}createInt(t){return t}createInt32(t,r){return Dt.buildInt32(t,r)}createInt64(t,r,n,u){return Dt.buildInt64(t,r,n,u)}createFloat(t){return t}createFloatSingle(t,r,n,u){return Vn.read([t,r,n,u],0,!1,23,4)}createFloatDouble(t,r,n,u,d,y,c,b){return Vn.read([t,r,n,u,d,y,c,b],0,!1,52,8)}createInt32Neg(t,r){return-1-Dt.buildInt32(t,r)}createInt64Neg(t,r,n,u){const d=Dt.buildInt32(t,r),y=Dt.buildInt32(n,u);return d>bt.MAX_SAFE_HIGH?bt.NEG_ONE.minus(new wo(d).times(bt.SHIFT32).plus(y)):-1-(d*bt.SHIFT32+y)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(t,r){return t.join("")}createUtf8StringFromHeap(t,r){return t===r?"":this._buffer.toString("utf8",t,r)}createSimpleUnassigned(t){return new go(t)}pushInt(t){this._push(this.createInt(t))}pushInt32(t,r){this._push(this.createInt32(t,r))}pushInt64(t,r,n,u){this._push(this.createInt64(t,r,n,u))}pushFloat(t){this._push(this.createFloat(t))}pushFloatSingle(t,r,n,u){this._push(this.createFloatSingle(t,r,n,u))}pushFloatDouble(t,r,n,u,d,y,c,b){this._push(this.createFloatDouble(t,r,n,u,d,y,c,b))}pushInt32Neg(t,r){this._push(this.createInt32Neg(t,r))}pushInt64Neg(t,r,n,u){this._push(this.createInt64Neg(t,r,n,u))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],bt.PARENT.ARRAY,-1)}pushArrayStartFixed(t){this._createArrayStartFixed(t)}pushArrayStartFixed32(t,r){const n=Dt.buildInt32(t,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(t,r,n,u){const d=Dt.buildInt64(t,r,n,u);this._createArrayStartFixed(d)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(t){this._createObjectStartFixed(t)}pushObjectStartFixed32(t,r){const n=Dt.buildInt32(t,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(t,r,n,u){const d=Dt.buildInt64(t,r,n,u);this._createObjectStartFixed(d)}pushByteStringStart(){this._parents[this._depth]={type:bt.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(t,r){this._push(this.createByteStringFromHeap(t,r))}pushUtf8StringStart(){this._parents[this._depth]={type:bt.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(t,r){this._push(this.createUtf8StringFromHeap(t,r))}pushSimpleUnassigned(t){this._push(this.createSimpleUnassigned(t))}pushTagStart(t){this._parents[this._depth]={type:bt.PARENT.TAG,length:1,ref:[t]}}pushTagStart4(t,r){this.pushTagStart(Dt.buildInt32(t,r))}pushTagStart8(t,r,n,u){this.pushTagStart(Dt.buildInt64(t,r,n,u))}pushTagUnassigned(t){this._push(this.createTag(t))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(t){if(t===0){this._push(this.createObject({}));return}this._createParent({},bt.PARENT.OBJECT,t)}_createArrayStartFixed(t){if(t===0){this._push(this.createArray([]));return}this._createParent(new Array(t),bt.PARENT.ARRAY,t)}_decode(t){if(t.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(t);const r=this.parser.parse(t.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(t){return this._decode(t),this._res[0]}decodeAll(t){return this._decode(t),this._res}static decode(t,r){return typeof t=="string"&&(t=Ie.from(t,r||"hex")),new xn({size:t.length}).decodeFirst(t)}static decodeAll(t,r){return typeof t=="string"&&(t=Ie.from(t,r||"hex")),new xn({size:t.length}).decodeAll(t)}};Tr.decodeFirst=Tr.decode;var qn=Tr;const{Buffer:Ur}=Me,bo=qn,Eo=je;class Nr extends bo{createTag(t,r){return`${t}(${r})`}createInt(t){return super.createInt(t).toString()}createInt32(t,r){return super.createInt32(t,r).toString()}createInt64(t,r,n,u){return super.createInt64(t,r,n,u).toString()}createInt32Neg(t,r){return super.createInt32Neg(t,r).toString()}createInt64Neg(t,r,n,u){return super.createInt64Neg(t,r,n,u).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(t){const r=super.createFloat(t);return Eo.isNegativeZero(t)?"-0_1":`${r}_1`}createFloatSingle(t,r,n,u){return`${super.createFloatSingle(t,r,n,u)}_2`}createFloatDouble(t,r,n,u,d,y,c,b){return`${super.createFloatDouble(t,r,n,u,d,y,c,b)}_3`}createByteString(t,r){const n=t.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(t,r){return`h'${Ur.from(super.createByteStringFromHeap(t,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(t){return`simple(${t})`}createArray(t,r){const n=super.createArray(t,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(t,r){const n=super.createMap(t),u=Array.from(n.keys()).reduce(Jn(n),"");return r===-1?`{_ ${u}}`:`{${u}}`}createObject(t,r){const n=super.createObject(t),u=Object.keys(n).reduce(Jn(n),"");return r===-1?`{_ ${u}}`:`{${u}}`}createUtf8String(t,r){const n=t.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(t,r){return`"${Ur.from(super.createUtf8StringFromHeap(t,r)).toString("utf8")}"`}static diagnose(t,r){return typeof t=="string"&&(t=Ur.from(t,r||"hex")),new Nr().decodeFirst(t)}}var _o=Nr;function Jn(e){return(t,r)=>t?`${t}, ${r}: ${e[r]}`:`${r}: ${e[r]}`}const{Buffer:Wt}=Me,{URL:Io}=Wn,Fr=Ze.BigNumber,vr=je,Nt=Ot,$t=Nt.MT,tr=Nt.NUMBYTES,Xn=Nt.SHIFT32,Zn=Nt.SYMS,Ae=Nt.TAG,Ao=Nt.MT.SIMPLE_FLOAT<<5|Nt.NUMBYTES.TWO,Bo=Nt.MT.SIMPLE_FLOAT<<5|Nt.NUMBYTES.FOUR,So=Nt.MT.SIMPLE_FLOAT<<5|Nt.NUMBYTES.EIGHT,To=Nt.MT.SIMPLE_FLOAT<<5|Nt.SIMPLE.TRUE,Uo=Nt.MT.SIMPLE_FLOAT<<5|Nt.SIMPLE.FALSE,No=Nt.MT.SIMPLE_FLOAT<<5|Nt.SIMPLE.UNDEFINED,jn=Nt.MT.SIMPLE_FLOAT<<5|Nt.SIMPLE.NULL,Fo=new Fr("0x20000000000000"),vo=Wt.from("f97e00","hex"),Ro=Wt.from("f9fc00","hex"),Oo=Wt.from("f97c00","hex");function Lo(e){return{}.toString.call(e).slice(8,-1)}class er{constructor(t){t=t||{},this.streaming=typeof t.stream=="function",this.onData=t.stream,this.semanticTypes=[[Io,this._pushUrl],[Fr,this._pushBigNumber]];const r=t.genTypes||[],n=r.length;for(let u=0;u<n;u++)this.addSemanticType(r[u][0],r[u][1]);this._reset()}addSemanticType(t,r){const n=this.semanticTypes.length;for(let u=0;u<n;u++)if(this.semanticTypes[u][0]===t){const y=this.semanticTypes[u][1];return this.semanticTypes[u][1]=r,y}return this.semanticTypes.push([t,r]),null}push(t){return t&&(this.result[this.offset]=t,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=t.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(t,r,n){return this.result[this.offset]=t,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(t){return this.pushWrite(t,1,1)}_pushUInt16BE(t){return this.pushWrite(t,2,2)}_pushUInt32BE(t){return this.pushWrite(t,3,4)}_pushDoubleBE(t){return this.pushWrite(t,4,8)}_pushNaN(){return this.push(vo)}_pushInfinity(t){const r=t<0?Ro:Oo;return this.push(r)}_pushFloat(t){const r=Wt.allocUnsafe(2);if(vr.writeHalf(r,t)&&vr.parseHalf(r)===t)return this._pushUInt8(Ao)&&this.push(r);const n=Wt.allocUnsafe(4);return n.writeFloatBE(t,0),n.readFloatBE(0)===t?this._pushUInt8(Bo)&&this.push(n):this._pushUInt8(So)&&this._pushDoubleBE(t)}_pushInt(t,r,n){const u=r<<5;return t<24?this._pushUInt8(u|t):t<=255?this._pushUInt8(u|tr.ONE)&&this._pushUInt8(t):t<=65535?this._pushUInt8(u|tr.TWO)&&this._pushUInt16BE(t):t<=4294967295?this._pushUInt8(u|tr.FOUR)&&this._pushUInt32BE(t):t<=Number.MAX_SAFE_INTEGER?this._pushUInt8(u|tr.EIGHT)&&this._pushUInt32BE(Math.floor(t/Xn))&&this._pushUInt32BE(t%Xn):r===$t.NEG_INT?this._pushFloat(n):this._pushFloat(t)}_pushIntNum(t){return t<0?this._pushInt(-t-1,$t.NEG_INT,t):this._pushInt(t,$t.POS_INT)}_pushNumber(t){switch(!1){case t===t:return this._pushNaN(t);case isFinite(t):return this._pushInfinity(t);case t%1!==0:return this._pushIntNum(t);default:return this._pushFloat(t)}}_pushString(t){const r=Wt.byteLength(t,"utf8");return this._pushInt(r,$t.UTF8_STRING)&&this.pushWrite(t,5,r)}_pushBoolean(t){return this._pushUInt8(t?To:Uo)}_pushUndefined(t){return this._pushUInt8(No)}_pushArray(t,r){const n=r.length;if(!t._pushInt(n,$t.ARRAY))return!1;for(let u=0;u<n;u++)if(!t.pushAny(r[u]))return!1;return!0}_pushTag(t){return this._pushInt(t,$t.TAG)}_pushDate(t,r){return t._pushTag(Ae.DATE_EPOCH)&&t.pushAny(Math.round(r/1e3))}_pushBuffer(t,r){return t._pushInt(r.length,$t.BYTE_STRING)&&t.push(r)}_pushNoFilter(t,r){return t._pushBuffer(t,r.slice())}_pushRegexp(t,r){return t._pushTag(Ae.REGEXP)&&t.pushAny(r.source)}_pushSet(t,r){if(!t._pushInt(r.size,$t.ARRAY))return!1;for(const n of r)if(!t.pushAny(n))return!1;return!0}_pushUrl(t,r){return t._pushTag(Ae.URI)&&t.pushAny(r.format())}_pushBigint(t){let r=Ae.POS_BIGINT;t.isNegative()&&(t=t.negated().minus(1),r=Ae.NEG_BIGINT);let n=t.toString(16);n.length%2&&(n="0"+n);const u=Wt.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,u)}_pushBigNumber(t,r){if(r.isNaN())return t._pushNaN();if(!r.isFinite())return t._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return t._pushBigint(r);if(!(t._pushTag(Ae.DECIMAL_FRAC)&&t._pushInt(2,$t.ARRAY)))return!1;const n=r.decimalPlaces(),u=r.multipliedBy(new Fr(10).pow(n));return t._pushIntNum(-n)?u.abs().isLessThan(Fo)?t._pushIntNum(u.toNumber()):t._pushBigint(u):!1}_pushMap(t,r){return t._pushInt(r.size,$t.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(t){if(!t)return this._pushUInt8(jn);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(t instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(t,this,t);var u=t.encodeCBOR;if(typeof u=="function")return u.call(t,this);var d=Object.keys(t),y=d.length;return this._pushInt(y,$t.MAP)?this._pushRawMap(y,d.map(c=>[c,t[c]])):!1}_pushRawMap(t,r){r=r.map(function(u){return u[0]=er.encode(u[0]),u}).sort(vr.keySorter);for(var n=0;n<t;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(t){return this.pushAny(t)}pushAny(t){var r=Lo(t);switch(r){case"Number":return this._pushNumber(t);case"String":return this._pushString(t);case"Boolean":return this._pushBoolean(t);case"Object":return this._pushObject(t);case"Array":return this._pushArray(this,t);case"Uint8Array":return this._pushBuffer(this,Wt.isBuffer(t)?t:Wt.from(t));case"Null":return this._pushUInt8(jn);case"Undefined":return this._pushUndefined(t);case"Map":return this._pushMap(this,t);case"Set":return this._pushSet(this,t);case"URL":return this._pushUrl(this,t);case"BigNumber":return this._pushBigNumber(this,t);case"Date":return this._pushDate(this,t);case"RegExp":return this._pushRegexp(this,t);case"Symbol":switch(t){case Zn.NULL:return this._pushObject(null);case Zn.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+t.toString())}default:throw new Error("Unknown type: "+typeof t+", "+(t?t.toString():""))}}finalize(){if(this.offset===0)return null;for(var t=this.result,r=this.resultLength,n=this.resultMethod,u=this.offset,d=0,y=0;y<u;y++)d+=r[y];var c=Wt.allocUnsafe(d),b=0,B=0;for(y=0;y<u;y++){switch(B=r[y],n[y]){case 0:t[y].copy(c,b);break;case 1:c.writeUInt8(t[y],b,!0);break;case 2:c.writeUInt16BE(t[y],b,!0);break;case 3:c.writeUInt32BE(t[y],b,!0);break;case 4:c.writeDoubleBE(t[y],b,!0);break;case 5:c.write(t[y],b,B,"utf8");break;default:throw new Error("unkown method")}b+=B}var N=c;return this._reset(),N}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(t){const r=new er;if(!r.pushAny(t))throw new Error("Failed to encode input");return r.finalize()}}var Do=er;(function(e){e.Diagnose=_o,e.Decoder=qn,e.Encoder=Do,e.Simple=Hn,e.Tagged=Kn,e.decodeAll=e.Decoder.decodeAll,e.decodeFirst=e.Decoder.decodeFirst,e.diagnose=e.Diagnose.diagnose,e.encode=e.Encoder.encode,e.decode=e.Decoder.decode,e.leveldb={decode:e.Decoder.decodeAll,encode:e.Encoder.encode,buffer:!0,name:"cbor"}})(Gn);var Qn=ls(Gn);function de(e){return Le(Zs.create().update(new Uint8Array(e)).digest())}function rr(e){if(e instanceof Qn.Tagged)return rr(e.value);if(typeof e=="string")return ti(e);if(typeof e=="number")return de(Ln(e));if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return de(e);if(Array.isArray(e)){const t=e.map(rr);return de(Oe(...t))}else{if(e&&typeof e=="object"&&e._isPrincipal)return de(e.toUint8Array());if(typeof e=="object"&&e!==null&&typeof e.toHash=="function")return rr(e.toHash());if(typeof e=="object")return ei(e);if(typeof e=="bigint")return de(Ln(e))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${e}`),{value:e})}const ti=e=>{const t=new TextEncoder().encode(e);return de(t)};function Rr(e){return ei(e)}function ei(e){const n=Object.entries(e).filter(([,y])=>y!==void 0).map(([y,c])=>{const b=ti(y),B=rr(c);return[b,B]}).sort(([y],[c])=>Fn(y,c)),u=Oe(...n.map(y=>Oe(...y)));return de(u)}var Po=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(e);u<n.length;u++)t.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(e,n[u])&&(r[n[u]]=e[n[u]]);return r};const Mo=new TextEncoder().encode(`
ic-request`);class Or{getPrincipal(){return this._principal||(this._principal=ae.selfAuthenticating(new Uint8Array(this.getPublicKey().toDer()))),this._principal}async transformRequest(t){const{body:r}=t,n=Po(t,["body"]),u=Rr(r);return Object.assign(Object.assign({},n),{body:{content:r,sender_pubkey:this.getPublicKey().toDer(),sender_sig:await this.sign(Oe(Mo,u))}})}}class ri{getPrincipal(){return ae.anonymous()}async transformRequest(t){return Object.assign(Object.assign({},t),{body:{content:t.body}})}}var kt={},Be={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});const Co=9007199254740992;function Xt(e,...t){const r=new Uint8Array(e.byteLength+t.reduce((u,d)=>u+d.byteLength,0));r.set(new Uint8Array(e),0);let n=e.byteLength;for(const u of t)r.set(new Uint8Array(u),n),n+=u.byteLength;return r.buffer}function Ht(e,t,r){r=r.replace(/[^0-9a-fA-F]/g,"");const n=2**(t-24);r=r.slice(-n*2).padStart(n*2,"0");const u=[(e<<5)+t].concat(r.match(/../g).map(d=>parseInt(d,16)));return new Uint8Array(u).buffer}function nr(e,t){if(t<24)return new Uint8Array([(e<<5)+t]).buffer;{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27;return Ht(e,r,t.toString(16))}}function ni(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|n&63):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|n&63):(r++,n=(n&1023)<<10|e.charCodeAt(r)&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return Xt(new Uint8Array(nr(3,e.length)),new Uint8Array(t))}function ko(e,t){if(e==14277111)return Xt(new Uint8Array([217,217,247]),t);if(e<24)return Xt(new Uint8Array([192+e]),t);{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27,n=2**(r-24),u=e.toString(16).slice(-n*2).padStart(n*2,"0"),d=[192+r].concat(u.match(/../g).map(y=>parseInt(y,16)));return new Uint8Array(d).buffer}}Et.tagged=ko;function Ce(e){return new Uint8Array(e).buffer}Et.raw=Ce;function Lr(e){if(isNaN(e))throw new RangeError("Invalid number.");e=Math.min(Math.max(0,e),23);const t=[0+e];return new Uint8Array(t).buffer}Et.uSmall=Lr;function ii(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),255),e=e.toString(16),Ht(0,24,e)}Et.u8=ii;function si(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),65535),e=e.toString(16),Ht(0,25,e)}Et.u16=si;function oi(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),4294967295),e=e.toString(16),Ht(0,26,e)}Et.u32=oi;function Dr(e,t){if(typeof e=="string"&&t==16){if(e.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return Ht(0,27,e)}if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),Co),e=e.toString(16),Ht(0,27,e)}Et.u64=Dr;function ai(e){if(isNaN(e))throw new RangeError("Invalid number.");if(e===0)return Lr(0);e=Math.min(Math.max(0,-e),24)-1;const t=[32+e];return new Uint8Array(t).buffer}Et.iSmall=ai;function ui(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),255),e=e.toString(16),Ht(1,24,e)}Et.i8=ui;function ci(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),65535),e=e.toString(16),Ht(1,25,e)}Et.i16=ci;function fi(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),4294967295),e=e.toString(16),Ht(1,26,e)}Et.i32=fi;function hi(e,t){if(typeof e=="string"&&t==16){if(e.startsWith("-")?e=e.slice(1):e="0",e.match(/[^0-9a-fA-F]/)||e.length>16)throw new RangeError("Invalid number.");let r=!1,n=e.split("").reduceRight((u,d)=>{if(r)return d+u;let y=parseInt(d,16)-1;return y>=0?(r=!0,y.toString(16)+u):"f"+u},"");return r?Ht(1,27,n):Dr(0)}if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),9007199254740992),e=e.toString(16),Ht(1,27,e)}Et.i64=hi;function Go(e){return e>=0?e<24?Lr(e):e<=255?ii(e):e<=65535?si(e):e<=4294967295?oi(e):Dr(e):e>=-24?ai(e):e>=-255?ui(e):e>=-65535?ci(e):e>=-4294967295?fi(e):hi(e)}Et.number=Go;function $o(e){return Xt(nr(2,e.byteLength),e)}Et.bytes=$o;function Ho(e){return ni(e)}Et.string=Ho;function Ko(e){return Xt(nr(4,e.length),...e)}Et.array=Ko;function zo(e,t=!1){e instanceof Map||(e=new Map(Object.entries(e)));let r=Array.from(e.entries());return t&&(r=r.sort(([n],[u])=>n.localeCompare(u))),Xt(nr(5,e.size),...r.map(([n,u])=>Xt(ni(n),u)))}Et.map=zo;function Yo(e){const t=new Float32Array([e]);return Xt(new Uint8Array([250]),new Uint8Array(t.buffer))}Et.singleFloat=Yo;function Wo(e){const t=new Float64Array([e]);return Xt(new Uint8Array([251]),new Uint8Array(t.buffer))}Et.doubleFloat=Wo;function Vo(e){return e?li():di()}Et.bool=Vo;function li(){return Ce(new Uint8Array([245]))}Et.true_=li;function di(){return Ce(new Uint8Array([244]))}Et.false_=di;function qo(){return Ce(new Uint8Array([246]))}Et.null_=qo;function Jo(){return Ce(new Uint8Array([247]))}Et.undefined_=Jo;var Xo=we&&we.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Be,"__esModule",{value:!0});const Kt=Xo(Et),Zo=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class pi{constructor(t,r=!1){this._serializer=t,this._stable=r,this.name="jsonDefault",this.priority=-100}match(t){return["undefined","boolean","number","string","object"].indexOf(typeof t)!=-1}encode(t){switch(typeof t){case"undefined":return Kt.undefined_();case"boolean":return Kt.bool(t);case"number":return Math.floor(t)===t?Kt.number(t):Kt.doubleFloat(t);case"string":return Kt.string(t);case"object":if(t===null)return Kt.null_();if(Array.isArray(t))return Kt.array(t.map(r=>this._serializer.serializeValue(r)));if(Zo.find(r=>t instanceof r))return Kt.bytes(t.buffer);if(Object.getOwnPropertyNames(t).indexOf("toJSON")!==-1)return this.encode(t.toJSON());if(t instanceof Map){const r=new Map;for(const[n,u]of t.entries())r.set(n,this._serializer.serializeValue(u));return Kt.map(r,this._stable)}else{const r=new Map;for(const[n,u]of Object.entries(t))r.set(n,this._serializer.serializeValue(u));return Kt.map(r,this._stable)}default:throw new Error("Invalid value.")}}}Be.JsonDefaultCborEncoder=pi;class wi{constructor(){this.name="cborEncoder",this.priority=-90}match(t){return typeof t=="object"&&typeof t.toCBOR=="function"}encode(t){return t.toCBOR()}}Be.ToCborEncoder=wi;class yi{constructor(){this._encoders=new Set}static withDefaultEncoders(t=!1){const r=new this;return r.addEncoder(new pi(r,t)),r.addEncoder(new wi),r}removeEncoder(t){for(const r of this._encoders.values())r.name==t&&this._encoders.delete(r)}addEncoder(t){this._encoders.add(t)}getEncoderFor(t){let r=null;for(const n of this._encoders)(!r||n.priority>r.priority)&&n.match(t)&&(r=n);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(t){return this.getEncoderFor(t).encode(t)}serialize(t){return this.serializeValue(t)}}Be.CborSerializer=yi;class jo extends yi{serialize(t){return Kt.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(t))]))}}Be.SelfDescribeCborSerializer=jo,function(e){function t(u){for(var d in u)e.hasOwnProperty(d)||(e[d]=u[d])}var r=we&&we.__importStar||function(u){if(u&&u.__esModule)return u;var d={};if(u!=null)for(var y in u)Object.hasOwnProperty.call(u,y)&&(d[y]=u[y]);return d.default=u,d};Object.defineProperty(e,"__esModule",{value:!0}),t(Be);const n=r(Et);e.value=n}(kt);class Qo{get name(){return"Principal"}get priority(){return 0}match(t){return t&&t._isPrincipal===!0}encode(t){return kt.value.bytes(t.toUint8Array())}}class ta{get name(){return"Buffer"}get priority(){return 1}match(t){return t instanceof ArrayBuffer||ArrayBuffer.isView(t)}encode(t){return kt.value.bytes(new Uint8Array(t))}}class ea{get name(){return"BigInt"}get priority(){return 1}match(t){return typeof t=="bigint"}encode(t){return t>BigInt(0)?kt.value.tagged(2,kt.value.bytes(ue(t.toString(16)))):kt.value.tagged(3,kt.value.bytes(ue((BigInt("-1")*t).toString(16))))}}const Pr=kt.SelfDescribeCborSerializer.withDefaultEncoders(!0);Pr.addEncoder(new Qo),Pr.addEncoder(new ta),Pr.addEncoder(new ea);var gi;(function(e){e[e.Uint64LittleEndian=71]="Uint64LittleEndian",e[e.Semantic=55799]="Semantic"})(gi||(gi={}));class Wu extends Qn.Decoder{createByteString(t){return Oe(...t)}createByteStringFromHeap(t,r){return t===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(t,r))}}var xi;(function(e){e.Call="call"})(xi||(xi={})),BigInt(1e6);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mr=BigInt(0),Cr=BigInt(1);function kr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Gr(e){if(!kr(e))throw new Error("Uint8Array expected")}function $r(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function mi(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Mr:BigInt("0x"+e)}const bi=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ra=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Hr(e){if(Gr(e),bi)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=ra[e[r]];return t}const Zt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ei(e){if(e>=Zt._0&&e<=Zt._9)return e-Zt._0;if(e>=Zt.A&&e<=Zt.F)return e-(Zt.A-10);if(e>=Zt.a&&e<=Zt.f)return e-(Zt.a-10)}function _i(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(bi)return Uint8Array.fromHex(e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let u=0,d=0;u<r;u++,d+=2){const y=Ei(e.charCodeAt(d)),c=Ei(e.charCodeAt(d+1));if(y===void 0||c===void 0){const b=e[d]+e[d+1];throw new Error('hex string expected, got non-hex character "'+b+'" at index '+d)}n[u]=y*16+c}return n}function na(e){return mi(Hr(e))}function ir(e){return Gr(e),mi(Hr(Uint8Array.from(e).reverse()))}function Ii(e,t){return _i(e.toString(16).padStart(t*2,"0"))}function Kr(e,t){return Ii(e,t).reverse()}function jt(e,t,r){let n;if(typeof t=="string")try{n=_i(t)}catch(d){throw new Error(e+" must be hex string or Uint8Array, cause: "+d)}else if(kr(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const u=n.length;if(typeof r=="number"&&u!==r)throw new Error(e+" of length "+r+" expected, got "+u);return n}function Ai(...e){let t=0;for(let n=0;n<e.length;n++){const u=e[n];Gr(u),t+=u.length}const r=new Uint8Array(t);for(let n=0,u=0;n<e.length;n++){const d=e[n];r.set(d,u),u+=d.length}return r}const zr=e=>typeof e=="bigint"&&Mr<=e;function ia(e,t,r){return zr(e)&&zr(t)&&zr(r)&&t<=e&&e<r}function ke(e,t,r,n){if(!ia(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function sa(e){let t;for(t=0;e>Mr;e>>=Cr,t+=1);return t}const Yr=e=>(Cr<<BigInt(e))-Cr,oa={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||kr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Wr(e,t,r={}){const n=(u,d,y)=>{const c=oa[d];if(typeof c!="function")throw new Error("invalid validator function");const b=e[u];if(!(y&&b===void 0)&&!c(b,e))throw new Error("param "+String(u)+" is invalid. Expected "+d+", got "+b)};for(const[u,d]of Object.entries(t))n(u,d,!1);for(const[u,d]of Object.entries(r))n(u,d,!0);return e}function Bi(e){const t=new WeakMap;return(r,...n)=>{const u=t.get(r);if(u!==void 0)return u;const d=e(r,...n);return t.set(r,d),d}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mt=BigInt(0),Lt=BigInt(1),pe=BigInt(2),aa=BigInt(3),Vr=BigInt(4),Si=BigInt(5),Ti=BigInt(8);function Ft(e,t){const r=e%t;return r>=Mt?r:t+r}function Vt(e,t,r){let n=e;for(;t-- >Mt;)n*=n,n%=r;return n}function Ui(e,t){if(e===Mt)throw new Error("invert: expected non-zero number");if(t<=Mt)throw new Error("invert: expected positive modulus, got "+t);let r=Ft(e,t),n=t,u=Mt,d=Lt;for(;r!==Mt;){const c=n/r,b=n%r,B=u-d*c;n=r,r=b,u=d,d=B}if(n!==Lt)throw new Error("invert: does not exist");return Ft(u,t)}function ua(e){let t=e-Lt,r=0;for(;t%pe===Mt;)t/=pe,r++;let n=pe;const u=qr(e);for(;n<e&&Fi(u,n);)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1){const y=(e+Lt)/Vr;return function(b,B){const N=b.pow(B,y);if(!b.eql(b.sqr(N),B))throw new Error("Cannot find square root");return N}}const d=(t+Lt)/pe;return function(c,b){if(!Fi(c,b))throw new Error("Cannot find square root");let B=r,N=c.pow(c.mul(c.ONE,n),t),O=c.pow(b,d),D=c.pow(b,t);for(;!c.eql(D,c.ONE);){if(c.eql(D,c.ZERO))return c.ZERO;let M=1;for(let J=c.sqr(D);M<B&&!c.eql(J,c.ONE);M++)J=c.sqr(J);const j=c.pow(N,Lt<<BigInt(B-M-1));N=c.sqr(j),O=c.mul(O,j),D=c.mul(D,N),B=M}return O}}function ca(e){return e%Vr===aa?function(r,n){const u=(e+Lt)/Vr,d=r.pow(n,u);if(!r.eql(r.sqr(d),n))throw new Error("Cannot find square root");return d}:e%Ti===Si?function(r,n){const u=r.mul(n,pe),d=(e-Si)/Ti,y=r.pow(u,d),c=r.mul(n,y),b=r.mul(r.mul(c,pe),y),B=r.mul(c,r.sub(b,r.ONE));if(!r.eql(r.sqr(B),n))throw new Error("Cannot find square root");return B}:ua(e)}const fa=(e,t)=>(Ft(e,t)&Lt)===Lt,ha=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function la(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=ha.reduce((n,u)=>(n[u]="function",n),t);return Wr(e,r)}function da(e,t,r){if(r<Mt)throw new Error("invalid exponent, negatives unsupported");if(r===Mt)return e.ONE;if(r===Lt)return t;let n=e.ONE,u=t;for(;r>Mt;)r&Lt&&(n=e.mul(n,u)),u=e.sqr(u),r>>=Lt;return n}function Ni(e,t,r=!1){const n=new Array(t.length).fill(r?e.ZERO:void 0),u=t.reduce((y,c,b)=>e.is0(c)?y:(n[b]=y,e.mul(y,c)),e.ONE),d=e.inv(u);return t.reduceRight((y,c,b)=>e.is0(c)?y:(n[b]=e.mul(y,n[b]),e.mul(y,c)),d),n}function pa(e,t){const r=(e.ORDER-Lt)/pe,n=e.pow(t,r),u=e.eql(n,e.ONE),d=e.eql(n,e.ZERO),y=e.eql(n,e.neg(e.ONE));if(!u&&!d&&!y)throw new Error("Cannot find square root: probably non-prime P");return u?1:d?0:-1}function Fi(e,t){const r=pa(e,t);return r===0||r===1}function vi(e,t){t!==void 0&&Ts(t);const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function qr(e,t,r=!1,n={}){if(e<=Mt)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:u,nByteLength:d}=vi(e,t);if(d>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let y;const c=Object.freeze({ORDER:e,isLE:r,BITS:u,BYTES:d,MASK:Yr(u),ZERO:Mt,ONE:Lt,create:b=>Ft(b,e),isValid:b=>{if(typeof b!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof b);return Mt<=b&&b<e},is0:b=>b===Mt,isOdd:b=>(b&Lt)===Lt,neg:b=>Ft(-b,e),eql:(b,B)=>b===B,sqr:b=>Ft(b*b,e),add:(b,B)=>Ft(b+B,e),sub:(b,B)=>Ft(b-B,e),mul:(b,B)=>Ft(b*B,e),pow:(b,B)=>da(c,b,B),div:(b,B)=>Ft(b*Ui(B,e),e),sqrN:b=>b*b,addN:(b,B)=>b+B,subN:(b,B)=>b-B,mulN:(b,B)=>b*B,inv:b=>Ui(b,e),sqrt:n.sqrt||(b=>(y||(y=ca(e)),y(c,b))),toBytes:b=>r?Kr(b,d):Ii(b,d),fromBytes:b=>{if(b.length!==d)throw new Error("Field.fromBytes: expected "+d+" bytes, got "+b.length);return r?ir(b):na(b)},invertBatch:b=>Ni(c,b),cmov:(b,B,N)=>N?B:b});return Object.freeze(c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ri=BigInt(0),Jr=BigInt(1);function Xr(e,t){const r=t.negate();return e?r:t}function Oi(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Zr(e,t){Oi(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1),u=2**e,d=Yr(e),y=BigInt(e);return{windows:r,windowSize:n,mask:d,maxNumber:u,shiftBy:y}}function Li(e,t,r){const{windowSize:n,mask:u,maxNumber:d,shiftBy:y}=r;let c=Number(e&u),b=e>>y;c>n&&(c-=d,b+=Jr);const B=t*n,N=B+Math.abs(c)-1,O=c===0,D=c<0,M=t%2!==0;return{nextN:b,offset:N,isZero:O,isNeg:D,isNegF:M,offsetF:B}}function wa(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function ya(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}const jr=new WeakMap,Di=new WeakMap;function Qr(e){return Di.get(e)||1}function ga(e,t){return{constTimeNegate:Xr,hasPrecomputes(r){return Qr(r)!==1},unsafeLadder(r,n,u=e.ZERO){let d=r;for(;n>Ri;)n&Jr&&(u=u.add(d)),d=d.double(),n>>=Jr;return u},precomputeWindow(r,n){const{windows:u,windowSize:d}=Zr(n,t),y=[];let c=r,b=c;for(let B=0;B<u;B++){b=c,y.push(b);for(let N=1;N<d;N++)b=b.add(c),y.push(b);c=b.double()}return y},wNAF(r,n,u){let d=e.ZERO,y=e.BASE;const c=Zr(r,t);for(let b=0;b<c.windows;b++){const{nextN:B,offset:N,isZero:O,isNeg:D,isNegF:M,offsetF:j}=Li(u,b,c);u=B,O?y=y.add(Xr(M,n[j])):d=d.add(Xr(D,n[N]))}return{p:d,f:y}},wNAFUnsafe(r,n,u,d=e.ZERO){const y=Zr(r,t);for(let c=0;c<y.windows&&u!==Ri;c++){const{nextN:b,offset:B,isZero:N,isNeg:O}=Li(u,c,y);if(u=b,!N){const D=n[B];d=d.add(O?D.negate():D)}}return d},getPrecomputes(r,n,u){let d=jr.get(n);return d||(d=this.precomputeWindow(n,r),r!==1&&jr.set(n,u(d))),d},wNAFCached(r,n,u){const d=Qr(r);return this.wNAF(d,this.getPrecomputes(d,r,u),n)},wNAFCachedUnsafe(r,n,u,d){const y=Qr(r);return y===1?this.unsafeLadder(r,n,d):this.wNAFUnsafe(y,this.getPrecomputes(y,r,u),n,d)},setWindowSize(r,n){Oi(n,t),Di.set(r,n),jr.delete(r)}}}function xa(e,t,r,n){if(wa(r,e),ya(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const u=e.ZERO,d=sa(BigInt(r.length)),y=d>12?d-3:d>4?d-2:d?2:1,c=Yr(y),b=new Array(Number(c)+1).fill(u),B=Math.floor((t.BITS-1)/y)*y;let N=u;for(let O=B;O>=0;O-=y){b.fill(u);for(let M=0;M<n.length;M++){const j=n[M],J=Number(j>>BigInt(O)&c);b[J]=b[J].add(r[M])}let D=u;for(let M=b.length-1,j=u;M>0;M--)j=j.add(b[M]),D=D.add(j);if(N=N.add(D),O!==0)for(let M=0;M<y;M++)N=N.double()}return N}function ma(e){return la(e.Fp),Wr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...vi(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}var Pi;(function(e){e[e.Empty=0]="Empty",e[e.Fork=1]="Fork",e[e.Labeled=2]="Labeled",e[e.Leaf=3]="Leaf",e[e.Pruned=4]="Pruned"})(Pi||(Pi={})),ue("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100");var Mi;(function(e){e.Unknown="unknown",e.Absent="absent",e.Found="found"})(Mi||(Mi={}));var Ci;(function(e){e.Less="less",e.Greater="greater"})(Ci||(Ci={}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qt=BigInt(0),Pt=BigInt(1),ki=BigInt(2),ba=BigInt(8),Ea={zip215:!0};function _a(e){const t=ma(e);return Wr(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Ia(e){const t=_a(e),{Fp:r,n,prehash:u,hash:d,randomBytes:y,nByteLength:c,h:b}=t,B=ki<<BigInt(c*8)-Pt,N=r.create,O=qr(t.n,t.nBitLength),D=t.uvRatio||((V,L)=>{try{return{isValid:!0,value:r.sqrt(V*r.inv(L))}}catch{return{isValid:!1,value:qt}}}),M=t.adjustScalarBytes||(V=>V),j=t.domain||((V,L,H)=>{if($r("phflag",H),L.length||H)throw new Error("Contexts/pre-hash are not supported");return V});function J(V,L,H=!1){const z=H?Pt:qt;ke("coordinate "+V,L,z,B)}function pt(V){if(!(V instanceof K))throw new Error("ExtendedPoint expected")}const At=Bi((V,L)=>{const{ex:H,ey:z,ez:G}=V,$=V.is0();L==null&&(L=$?ba:r.inv(G));const lt=N(H*L),g=N(z*L),at=N(G*L);if($)return{x:qt,y:Pt};if(at!==Pt)throw new Error("invZ was invalid");return{x:lt,y:g}}),ut=Bi(V=>{const{a:L,d:H}=t;if(V.is0())throw new Error("bad point: ZERO");const{ex:z,ey:G,ez:$,et:lt}=V,g=N(z*z),at=N(G*G),yt=N($*$),_t=N(yt*yt),k=N(g*L),Y=N(yt*N(k+at)),w=N(_t+N(H*N(g*at)));if(Y!==w)throw new Error("bad point: equation left != right (1)");const x=N(z*G),E=N($*lt);if(x!==E)throw new Error("bad point: equation left != right (2)");return!0});class K{constructor(L,H,z,G){J("x",L),J("y",H),J("z",z,!0),J("t",G),this.ex=L,this.ey=H,this.ez=z,this.et=G,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(L){if(L instanceof K)throw new Error("extended point not allowed");const{x:H,y:z}=L||{};return J("x",H),J("y",z),new K(H,z,Pt,N(H*z))}static normalizeZ(L){const H=Ni(r,L.map(z=>z.ez));return L.map((z,G)=>z.toAffine(H[G])).map(K.fromAffine)}static msm(L,H){return xa(K,O,L,H)}_setWindowSize(L){q.setWindowSize(this,L)}assertValidity(){ut(this)}equals(L){pt(L);const{ex:H,ey:z,ez:G}=this,{ex:$,ey:lt,ez:g}=L,at=N(H*g),yt=N($*G),_t=N(z*g),k=N(lt*G);return at===yt&&_t===k}is0(){return this.equals(K.ZERO)}negate(){return new K(N(-this.ex),this.ey,this.ez,N(-this.et))}double(){const{a:L}=t,{ex:H,ey:z,ez:G}=this,$=N(H*H),lt=N(z*z),g=N(ki*N(G*G)),at=N(L*$),yt=H+z,_t=N(N(yt*yt)-$-lt),k=at+lt,Y=k-g,w=at-lt,x=N(_t*Y),E=N(k*w),T=N(_t*w),S=N(Y*k);return new K(x,E,S,T)}add(L){pt(L);const{a:H,d:z}=t,{ex:G,ey:$,ez:lt,et:g}=this,{ex:at,ey:yt,ez:_t,et:k}=L,Y=N(G*at),w=N($*yt),x=N(g*z*k),E=N(lt*_t),T=N((G+$)*(at+yt)-Y-w),S=E-x,U=E+x,f=N(w-H*Y),i=N(T*S),s=N(U*f),l=N(T*f),p=N(S*U);return new K(i,s,p,l)}subtract(L){return this.add(L.negate())}wNAF(L){return q.wNAFCached(this,L,K.normalizeZ)}multiply(L){const H=L;ke("scalar",H,Pt,n);const{p:z,f:G}=this.wNAF(H);return K.normalizeZ([z,G])[0]}multiplyUnsafe(L,H=K.ZERO){const z=L;return ke("scalar",z,qt,n),z===qt?ot:this.is0()||z===Pt?this:q.wNAFCachedUnsafe(this,z,K.normalizeZ,H)}isSmallOrder(){return this.multiplyUnsafe(b).is0()}isTorsionFree(){return q.unsafeLadder(this,n).is0()}toAffine(L){return At(this,L)}clearCofactor(){const{h:L}=t;return L===Pt?this:this.multiplyUnsafe(L)}static fromHex(L,H=!1){const{d:z,a:G}=t,$=r.BYTES;L=jt("pointHex",L,$),$r("zip215",H);const lt=L.slice(),g=L[$-1];lt[$-1]=g&-129;const at=ir(lt),yt=H?B:r.ORDER;ke("pointHex.y",at,qt,yt);const _t=N(at*at),k=N(_t-Pt),Y=N(z*_t-G);let{isValid:w,value:x}=D(k,Y);if(!w)throw new Error("Point.fromHex: invalid y coordinate");const E=(x&Pt)===Pt,T=(g&128)!==0;if(!H&&x===qt&&T)throw new Error("Point.fromHex: x=0 and x_0=1");return T!==E&&(x=N(-x)),K.fromAffine({x,y:at})}static fromPrivateKey(L){const{scalar:H}=nt(L);return St.multiply(H)}toRawBytes(){const{x:L,y:H}=this.toAffine(),z=Kr(H,r.BYTES);return z[z.length-1]|=L&Pt?128:0,z}toHex(){return Hr(this.toRawBytes())}}K.BASE=new K(t.Gx,t.Gy,Pt,N(t.Gx*t.Gy)),K.ZERO=new K(qt,Pt,Pt,qt);const{BASE:St,ZERO:ot}=K,q=ga(K,c*8);function X(V){return Ft(V,n)}function et(V){return X(ir(V))}function nt(V){const L=r.BYTES;V=jt("private key",V,L);const H=jt("hashed private key",d(V),2*L),z=M(H.slice(0,L)),G=H.slice(L,2*L),$=et(z);return{head:z,prefix:G,scalar:$}}function C(V){const{head:L,prefix:H,scalar:z}=nt(V),G=St.multiply(z),$=G.toRawBytes();return{head:L,prefix:H,scalar:z,point:G,pointBytes:$}}function gt(V){return C(V).pointBytes}function st(V=Uint8Array.of(),...L){const H=Ai(...L);return et(d(j(H,jt("context",V),!!u)))}function ct(V,L,H={}){V=jt("message",V),u&&(V=u(V));const{prefix:z,scalar:G,pointBytes:$}=C(L),lt=st(H.context,z,V),g=St.multiply(lt).toRawBytes(),at=st(H.context,g,$,V),yt=X(lt+at*G);ke("signature.s",yt,qt,n);const _t=Ai(g,Kr(yt,r.BYTES));return jt("result",_t,r.BYTES*2)}const Bt=Ea;function xt(V,L,H,z=Bt){const{context:G,zip215:$}=z,lt=r.BYTES;V=jt("signature",V,2*lt),L=jt("message",L),H=jt("publicKey",H,lt),$!==void 0&&$r("zip215",$),u&&(L=u(L));const g=ir(V.slice(lt,2*lt));let at,yt,_t;try{at=K.fromHex(H,$),yt=K.fromHex(V.slice(0,lt),$),_t=St.multiplyUnsafe(g)}catch{return!1}if(!$&&at.isSmallOrder())return!1;const k=st(G,yt.toRawBytes(),at.toRawBytes(),L);return yt.add(at.multiplyUnsafe(k)).subtract(_t).clearCofactor().equals(K.ZERO)}return St._setWindowSize(8),{CURVE:t,getPublicKey:gt,sign:ct,verify:xt,ExtendedPoint:K,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>y(r.BYTES),precompute(V=8,L=K.BASE){return L._setWindowSize(V),L.multiply(BigInt(3)),L}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tn=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Gi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Aa=BigInt(1),$i=BigInt(2);BigInt(3);const Ba=BigInt(5),Sa=BigInt(8);function Ta(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),u=BigInt(80),d=tn,c=e*e%d*e%d,b=Vt(c,$i,d)*c%d,B=Vt(b,Aa,d)*e%d,N=Vt(B,Ba,d)*B%d,O=Vt(N,t,d)*N%d,D=Vt(O,r,d)*O%d,M=Vt(D,n,d)*D%d,j=Vt(M,u,d)*M%d,J=Vt(j,u,d)*M%d,pt=Vt(J,t,d)*N%d;return{pow_p_5_8:Vt(pt,$i,d)*e%d,b2:c}}function Ua(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Na(e,t){const r=tn,n=Ft(t*t*t,r),u=Ft(n*n*t,r),d=Ta(e*u).pow_p_5_8;let y=Ft(e*n*d,r);const c=Ft(t*y*y,r),b=y,B=Ft(y*Gi,r),N=c===e,O=c===Ft(-e,r),D=c===Ft(-e*Gi,r);return N&&(y=b),(O||D)&&(y=B),fa(y,r)&&(y=Ft(-y,r)),{isValid:N||O,value:y}}const Hi=qr(tn,void 0,!0),Fa={a:Hi.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Hi,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Sa,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Xs,randomBytes:vs,adjustScalarBytes:Ua,uvRatio:Na},Ge=Ia(Fa),Ki=e=>{if(e<=127)return 1;if(e<=255)return 2;if(e<=65535)return 3;if(e<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},zi=(e,t,r)=>{if(r<=127)return e[t]=r,1;if(r<=255)return e[t]=129,e[t+1]=r,2;if(r<=65535)return e[t]=130,e[t+1]=r>>8,e[t+2]=r,3;if(r<=16777215)return e[t]=131,e[t+1]=r>>16,e[t+2]=r>>8,e[t+3]=r,4;throw new Error("Length too long (> 4 bytes)")},en=(e,t)=>{if(e[t]<128)return 1;if(e[t]===128)throw new Error("Invalid length 0");if(e[t]===129)return 2;if(e[t]===130)return 3;if(e[t]===131)return 4;throw new Error("Length too long (> 4 bytes)")},va=(e,t)=>{const r=en(e,t);if(r===1)return e[t];if(r===2)return e[t+1];if(r===3)return(e[t+1]<<8)+e[t+2];if(r===4)return(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const Yi=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function Ra(e,t){const r=2+Ki(e.byteLength+1),n=t.byteLength+r+e.byteLength;let u=0;const d=new Uint8Array(1+Ki(n)+n);return d[u++]=48,u+=zi(d,u,n),d.set(t,u),u+=t.byteLength,d[u++]=3,u+=zi(d,u,e.byteLength+1),d[u++]=0,d.set(new Uint8Array(e),u),d}const Oa=(e,t)=>{let r=0;const n=(c,b)=>{if(u[r++]!==c)throw new Error("Expected: "+b)},u=new Uint8Array(e);if(n(48,"sequence"),r+=en(u,r),!vn(u.slice(r,r+t.byteLength),t))throw new Error("Not the expected OID.");r+=t.byteLength,n(3,"bit string");const d=va(u,r)-1;r+=en(u,r),n(0,"0 padding");const y=u.slice(r);if(d!==y.length)throw new Error(`DER payload mismatch: Expected length ${d} actual length ${y.length}`);return y};var Wi;(function(e){e.Received="received",e.Processing="processing",e.Replied="replied",e.Rejected="rejected",e.Unknown="unknown",e.Done="done"})(Wi||(Wi={}));var Vi;(function(e){e.Error="err",e.GetPrincipal="gp",e.GetPrincipalResponse="gpr",e.Query="q",e.QueryResponse="qr",e.Call="c",e.CallResponse="cr",e.ReadState="rs",e.ReadStateResponse="rsr",e.Status="s",e.StatusResponse="sr"})(Vi||(Vi={}));var sr=function(e,t,r,n,u){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!u:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?u.call(e,r):u?u.value=r:t.set(e,r),r},ce=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},or,ar,Se,Te;function qi(e){return e!==null&&typeof e=="object"}class Qt{constructor(t){if(or.set(this,void 0),ar.set(this,void 0),t.byteLength!==Qt.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");sr(this,or,De(t),"f"),sr(this,ar,Qt.derEncode(t),"f")}static from(t){if(typeof t=="string"){const r=ue(t);return this.fromRaw(r)}else if(qi(t)){const r=t;if(qi(r)&&Object.hasOwnProperty.call(r,"__derEncodedPublicKey__"))return this.fromDer(r);if(ArrayBuffer.isView(r)){const n=r;return this.fromRaw(De(n.buffer))}else{if(r instanceof ArrayBuffer)return this.fromRaw(r);if("rawKey"in r)return this.fromRaw(r.rawKey);if("derKey"in r)return this.fromDer(r.derKey);if("toDer"in r)return this.fromDer(r.toDer())}}throw new Error("Cannot construct Ed25519PublicKey from the provided key.")}static fromRaw(t){return new Qt(t)}static fromDer(t){return new Qt(this.derDecode(t))}static derEncode(t){const r=Ra(t,Yi).buffer;return r.__derEncodedPublicKey__=void 0,r}static derDecode(t){const r=Oa(t,Yi);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return De(r)}get rawKey(){return ce(this,or,"f")}get derKey(){return ce(this,ar,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}or=new WeakMap,ar=new WeakMap,Qt.RAW_KEY_LENGTH=32;class fe extends Or{constructor(t,r){super(),Se.set(this,void 0),Te.set(this,void 0),sr(this,Se,Qt.from(t),"f"),sr(this,Te,new Uint8Array(r),"f")}static generate(t){if(t&&t.length!==32)throw new Error("Ed25519 Seed needs to be 32 bytes long.");t||(t=Ge.utils.randomPrivateKey()),vn(t,new Uint8Array(new Array(32).fill(0)))&&console.warn("Seed is all zeros. This is not a secure seed. Please provide a seed with sufficient entropy if this is a production environment.");const r=new Uint8Array(32);for(let u=0;u<32;u++)r[u]=new Uint8Array(t)[u];const n=Ge.getPublicKey(r);return fe.fromKeyPair(n,r)}static fromParsedJson(t){const[r,n]=t;return new fe(Qt.fromDer(ue(r)),ue(n))}static fromJSON(t){const r=JSON.parse(t);if(Array.isArray(r)){if(typeof r[0]=="string"&&typeof r[1]=="string")return this.fromParsedJson([r[0],r[1]]);throw new Error("Deserialization error: JSON must have at least 2 items.")}throw new Error(`Deserialization error: Invalid JSON type for string: ${JSON.stringify(t)}`)}static fromKeyPair(t,r){return new fe(Qt.fromRaw(t),r)}static fromSecretKey(t){const r=Ge.getPublicKey(new Uint8Array(t));return fe.fromKeyPair(r,t)}toJSON(){return[Ee(ce(this,Se,"f").toDer()),Ee(ce(this,Te,"f"))]}getKeyPair(){return{secretKey:ce(this,Te,"f"),publicKey:ce(this,Se,"f")}}getPublicKey(){return ce(this,Se,"f")}async sign(t){const r=new Uint8Array(t),n=Le(Ge.sign(r,ce(this,Te,"f").slice(0,32)));return Object.defineProperty(n,"__signature__",{enumerable:!1,value:void 0}),n}static verify(t,r,n){const[u,d,y]=[t,r,n].map(c=>(typeof c=="string"&&(c=ue(c)),c instanceof Uint8Array&&(c=De(c.buffer)),new Uint8Array(c)));return Ge.verify(u,d,y)}}Se=new WeakMap,Te=new WeakMap;class rn extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,rn.prototype)}}function Ji(e){if(typeof global<"u"&&global.crypto&&global.crypto.subtle)return global.crypto.subtle;if(e)return e;if(typeof crypto<"u"&&crypto.subtle)return crypto.subtle;throw new rn("Global crypto was not available and none was provided. Please inlcude a SubtleCrypto implementation. See https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto")}class ur extends Or{constructor(t,r,n){super(),this._keyPair=t,this._derKey=r,this._subtleCrypto=n}static async generate(t){const{extractable:r=!1,keyUsages:n=["sign","verify"],subtleCrypto:u}=t??{},d=Ji(u),y=await d.generateKey({name:"ECDSA",namedCurve:"P-256"},r,n),c=await d.exportKey("spki",y.publicKey);return new this(y,c,d)}static async fromKeyPair(t,r){const n=Ji(r),u=await n.exportKey("spki",t.publicKey);return new ur(t,u,n)}getKeyPair(){return this._keyPair}getPublicKey(){const t=this._derKey,r=Object.create(this._keyPair.publicKey);return r.toDer=function(){return t},r}async sign(t){const r={name:"ECDSA",hash:{name:"SHA-256"}};return await this._subtleCrypto.sign(r,this._keyPair.privateKey,t)}}var La=function(e,t,r,n,u){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!u:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?u.call(e,r):u?u.value=r:t.set(e,r),r},Ue=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},te;class Da{constructor(t){te.set(this,void 0),La(this,te,t,"f")}get rawKey(){return Ue(this,te,"f").rawKey}get derKey(){return Ue(this,te,"f").derKey}toDer(){return Ue(this,te,"f").toDer()}getPublicKey(){return Ue(this,te,"f")}getPrincipal(){if(!Ue(this,te,"f").rawKey)throw new Error("Cannot get principal from a public key without a raw key.");return ae.fromUint8Array(new Uint8Array(Ue(this,te,"f").rawKey))}transformRequest(){return Promise.reject("Not implemented. You are attempting to use a partial identity to sign calls, but this identity only has access to the public key.To sign calls, use a DelegationIdentity instead.")}}te=new WeakMap;var Pa=function(e,t,r,n,u){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!u:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?u.call(e,r):u?u.value=r:t.set(e,r),r},Ma=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Ca=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(e);u<n.length;u++)t.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(e,n[u])&&(r[n[u]]=e[n[u]]);return r},cr;const ka=new TextEncoder().encode("ic-request-auth-delegation"),Ga=new TextEncoder().encode(`
ic-request`);function nn(e){if(typeof e!="string"||e.length<64)throw new Error("Invalid public key.");return ue(e)}class sn{constructor(t,r,n){this.pubkey=t,this.expiration=r,this.targets=n}toCBOR(){return kt.value.map(Object.assign({pubkey:kt.value.bytes(this.pubkey),expiration:kt.value.u64(this.expiration.toString(16),16)},this.targets&&{targets:kt.value.array(this.targets.map(t=>kt.value.bytes(_e(t.toUint8Array()))))}))}toJSON(){return Object.assign({expiration:this.expiration.toString(16),pubkey:Ee(this.pubkey)},this.targets&&{targets:this.targets.map(t=>t.toHex())})}}async function $a(e,t,r,n){const u=new sn(t.toDer(),BigInt(+r)*BigInt(1e6),n),d=new Uint8Array([...ka,...new Uint8Array(Rr(Object.assign({},u)))]),y=await e.sign(_e(d));return{delegation:u,signature:y}}class $e{constructor(t,r){this.delegations=t,this.publicKey=r}static async create(t,r,n=new Date(Date.now()+15*60*1e3),u={}){var d,y;const c=await $a(t,r,n,u.targets);return new $e([...((d=u.previous)===null||d===void 0?void 0:d.delegations)||[],c],((y=u.previous)===null||y===void 0?void 0:y.publicKey)||t.getPublicKey().toDer())}static fromJSON(t){const{publicKey:r,delegations:n}=typeof t=="string"?JSON.parse(t):t;if(!Array.isArray(n))throw new Error("Invalid delegations.");const u=n.map(d=>{const{delegation:y,signature:c}=d,{pubkey:b,expiration:B,targets:N}=y;if(N!==void 0&&!Array.isArray(N))throw new Error("Invalid targets.");return{delegation:new sn(nn(b),BigInt("0x"+B),N&&N.map(O=>{if(typeof O!="string")throw new Error("Invalid target.");return ae.fromHex(O)})),signature:nn(c)}});return new this(u,nn(r))}static fromDelegations(t,r){return new this(t,r)}toJSON(){return{delegations:this.delegations.map(t=>{const{delegation:r,signature:n}=t,{targets:u}=r;return{delegation:Object.assign({expiration:r.expiration.toString(16),pubkey:Ee(r.pubkey)},u&&{targets:u.map(d=>d.toHex())}),signature:Ee(n)}}),publicKey:Ee(this.publicKey)}}}class Xi extends Or{constructor(t,r){super(),this._inner=t,this._delegation=r}static fromDelegation(t,r){return new this(t,r)}getDelegation(){return this._delegation}getPublicKey(){return{derKey:this._delegation.publicKey,toDer:()=>this._delegation.publicKey}}sign(t){return this._inner.sign(t)}async transformRequest(t){const{body:r}=t,n=Ca(t,["body"]),u=await Rr(r);return Object.assign(Object.assign({},n),{body:{content:r,sender_sig:await this.sign(_e(new Uint8Array([...Ga,...new Uint8Array(u)]))),sender_delegation:this._delegation.delegations,sender_pubkey:this._delegation.publicKey}})}}class fr extends Da{constructor(t,r){super(t),cr.set(this,void 0),Pa(this,cr,r,"f")}get delegation(){return Ma(this,cr,"f")}static fromDelegation(t,r){return new fr(t,r)}}cr=new WeakMap;function Zi(e,t){for(const{delegation:n}of e.delegations)if(+new Date(Number(n.expiration/BigInt(1e6)))<=+Date.now())return!1;const r=[];for(const n of r){const u=n.toText();for(const{delegation:d}of e.delegations){if(d.targets===void 0)continue;let y=!0;for(const c of d.targets)if(c.toText()===u){y=!1;break}if(y)return!1}}return!0}var ji;(function(e){e[e.ECDSA_WITH_SHA256=-7]="ECDSA_WITH_SHA256"})(ji||(ji={}));const Qi=["mousedown","mousemove","keydown","touchstart","wheel"];class ts{constructor(t={}){var r;this.callbacks=[],this.idleTimeout=10*60*1e3,this.timeoutID=void 0;const{onIdle:n,idleTimeout:u=10*60*1e3}=t||{};this.callbacks=n?[n]:[],this.idleTimeout=u;const d=this._resetTimer.bind(this);window.addEventListener("load",d,!0),Qi.forEach(function(c){document.addEventListener(c,d,!0)});const y=(c,b)=>{let B;return(...N)=>{const O=this,D=function(){B=void 0,c.apply(O,N)};clearTimeout(B),B=window.setTimeout(D,b)}};if(t?.captureScroll){const c=y(d,(r=t?.scrollDebounce)!==null&&r!==void 0?r:100);window.addEventListener("scroll",c,!0)}d()}static create(t={}){return new this(t)}registerCallback(t){this.callbacks.push(t)}exit(){clearTimeout(this.timeoutID),window.removeEventListener("load",this._resetTimer,!0);const t=this._resetTimer.bind(this);Qi.forEach(function(r){document.removeEventListener(r,t,!0)}),this.callbacks.forEach(r=>r())}_resetTimer(){const t=this.exit.bind(this);window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(t,this.idleTimeout)}}const Ha=(e,t)=>t.some(r=>e instanceof r);let es,rs;function Ka(){return es||(es=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function za(){return rs||(rs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ns=new WeakMap,on=new WeakMap,is=new WeakMap,an=new WeakMap,un=new WeakMap;function Ya(e){const t=new Promise((r,n)=>{const u=()=>{e.removeEventListener("success",d),e.removeEventListener("error",y)},d=()=>{r(he(e.result)),u()},y=()=>{n(e.error),u()};e.addEventListener("success",d),e.addEventListener("error",y)});return t.then(r=>{r instanceof IDBCursor&&ns.set(r,e)}).catch(()=>{}),un.set(t,e),t}function Wa(e){if(on.has(e))return;const t=new Promise((r,n)=>{const u=()=>{e.removeEventListener("complete",d),e.removeEventListener("error",y),e.removeEventListener("abort",y)},d=()=>{r(),u()},y=()=>{n(e.error||new DOMException("AbortError","AbortError")),u()};e.addEventListener("complete",d),e.addEventListener("error",y),e.addEventListener("abort",y)});on.set(e,t)}let cn={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return on.get(e);if(t==="objectStoreNames")return e.objectStoreNames||is.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return he(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Va(e){cn=e(cn)}function qa(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(fn(this),t,...r);return is.set(n,t.sort?t.sort():[t]),he(n)}:za().includes(e)?function(...t){return e.apply(fn(this),t),he(ns.get(this))}:function(...t){return he(e.apply(fn(this),t))}}function Ja(e){return typeof e=="function"?qa(e):(e instanceof IDBTransaction&&Wa(e),Ha(e,Ka())?new Proxy(e,cn):e)}function he(e){if(e instanceof IDBRequest)return Ya(e);if(an.has(e))return an.get(e);const t=Ja(e);return t!==e&&(an.set(e,t),un.set(t,e)),t}const fn=e=>un.get(e);function Xa(e,t,{blocked:r,upgrade:n,blocking:u,terminated:d}={}){const y=indexedDB.open(e,t),c=he(y);return n&&y.addEventListener("upgradeneeded",b=>{n(he(y.result),b.oldVersion,b.newVersion,he(y.transaction),b)}),r&&y.addEventListener("blocked",b=>r(b.oldVersion,b.newVersion,b)),c.then(b=>{d&&b.addEventListener("close",()=>d()),u&&b.addEventListener("versionchange",B=>u(B.oldVersion,B.newVersion,B))}).catch(()=>{}),c}const Za=["get","getKey","getAll","getAllKeys","count"],ja=["put","add","delete","clear"],hn=new Map;function ss(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(hn.get(t))return hn.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,u=ja.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(u||Za.includes(r)))return;const d=async function(y,...c){const b=this.transaction(y,u?"readwrite":"readonly");let B=b.store;return n&&(B=B.index(c.shift())),(await Promise.all([B[r](...c),u&&b.done]))[0]};return hn.set(t,d),d}Va(e=>({...e,get:(t,r,n)=>ss(t,r)||e.get(t,r,n),has:(t,r)=>!!ss(t,r)||e.has(t,r)}));const os="auth-client-db",as="ic-keyval",Qa=async(e=os,t=as,r)=>(us&&(localStorage!=null&&localStorage.getItem(ee))&&(localStorage.removeItem(ee),localStorage.removeItem(le)),await Xa(e,r,{upgrade:n=>{n.objectStoreNames.contains(t)&&n.clear(t),n.createObjectStore(t)}}));async function tu(e,t,r){return await e.get(t,r)}async function eu(e,t,r,n){return await e.put(t,n,r)}async function ru(e,t,r){return await e.delete(t,r)}class ln{constructor(t,r){this._db=t,this._storeName=r}static async create(t){const{dbName:r=os,storeName:n=as,version:u=ou}=t??{},d=await Qa(r,n,u);return new ln(d,n)}async set(t,r){return await eu(this._db,this._storeName,t,r)}async get(t){var r;return(r=await tu(this._db,this._storeName,t))!==null&&r!==void 0?r:null}async remove(t){return await ru(this._db,this._storeName,t)}}var nu=function(e,t,r,n,u){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!u:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?u.call(e,r):u?u.value=r:t.set(e,r),r},iu=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},hr;const le="identity",ee="delegation",su="iv",ou=1,us=typeof window<"u";class au{constructor(t="ic-",r){this.prefix=t,this._localStorage=r}get(t){return Promise.resolve(this._getLocalStorage().getItem(this.prefix+t))}set(t,r){return this._getLocalStorage().setItem(this.prefix+t,r),Promise.resolve()}remove(t){return this._getLocalStorage().removeItem(this.prefix+t),Promise.resolve()}_getLocalStorage(){if(this._localStorage)return this._localStorage;const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.localStorage:global.localStorage:window.localStorage;if(!t)throw new Error("Could not find local storage.");return t}}class cs{constructor(t){hr.set(this,void 0),nu(this,hr,t??{},"f")}get _db(){return new Promise(t=>{if(this.initializedDb){t(this.initializedDb);return}ln.create(iu(this,hr,"f")).then(r=>{this.initializedDb=r,t(r)})})}async get(t){return await(await this._db).get(t)}async set(t,r){await(await this._db).set(t,r)}async remove(t){await(await this._db).remove(t)}}hr=new WeakMap;const uu="https://identity.internetcomputer.org",cu="#authorize",dn="ECDSA",pn="Ed25519",fu=500,hu="UserInterrupt";class lu{constructor(t,r,n,u,d,y,c,b){this._identity=t,this._key=r,this._chain=n,this._storage=u,this.idleManager=d,this._createOptions=y,this._idpWindow=c,this._eventHandler=b,this._registerDefaultIdleCallback()}static async create(t={}){var r,n,u;const d=(r=t.storage)!==null&&r!==void 0?r:new cs,y=(n=t.keyType)!==null&&n!==void 0?n:dn;let c=null;if(t.identity)c=t.identity;else{let O=await d.get(le);if(!O&&us)try{const D=new au,M=await D.get(ee),j=await D.get(le);M&&j&&y===dn&&(console.log("Discovered an identity stored in localstorage. Migrating to IndexedDB"),await d.set(ee,M),await d.set(le,j),O=M,await D.remove(ee),await D.remove(le))}catch(D){console.error("error while attempting to recover localstorage: "+D)}if(O)try{typeof O=="object"?y===pn&&typeof O=="string"?c=await fe.fromJSON(O):c=await ur.fromKeyPair(O):typeof O=="string"&&(c=fe.fromJSON(O))}catch{}}let b=new ri,B=null;if(c)try{const O=await d.get(ee);if(typeof O=="object"&&O!==null)throw new Error("Delegation chain is incorrectly stored. A delegation chain should be stored as a string.");t.identity?b=t.identity:O&&(B=$e.fromJSON(O),Zi(B)?"toDer"in c?b=fr.fromDelegation(c,B):b=Xi.fromDelegation(c,B):(await wn(d),c=null))}catch(O){console.error(O),await wn(d),c=null}let N;return!((u=t.idleOptions)===null||u===void 0)&&u.disableIdle?N=void 0:(B||t.identity)&&(N=ts.create(t.idleOptions)),c||(y===pn?(c=await fe.generate(),await d.set(le,JSON.stringify(c.toJSON()))):(t.storage&&y===dn&&console.warn(`You are using a custom storage provider that may not support CryptoKey storage. If you are using a custom storage provider that does not support CryptoKey storage, you should use '${pn}' as the key type, as it can serialize to a string`),c=await ur.generate(),await d.set(le,c.getKeyPair()))),new this(b,c,B,d,N,t)}_registerDefaultIdleCallback(){var t,r;const n=(t=this._createOptions)===null||t===void 0?void 0:t.idleOptions;!n?.onIdle&&!n?.disableDefaultIdleCallback&&((r=this.idleManager)===null||r===void 0||r.registerCallback(()=>{this.logout(),location.reload()}))}async _handleSuccess(t,r){var n,u;const d=t.delegations.map(B=>({delegation:new sn(B.delegation.pubkey,B.delegation.expiration,B.delegation.targets),signature:B.signature.buffer})),y=$e.fromDelegations(d,t.userPublicKey.buffer),c=this._key;if(!c)return;this._chain=y,"toDer"in c?this._identity=fr.fromDelegation(c,this._chain):this._identity=Xi.fromDelegation(c,this._chain),(n=this._idpWindow)===null||n===void 0||n.close();const b=(u=this._createOptions)===null||u===void 0?void 0:u.idleOptions;!this.idleManager&&!b?.disableIdle&&(this.idleManager=ts.create(b),this._registerDefaultIdleCallback()),this._removeEventListener(),delete this._idpWindow,this._chain&&await this._storage.set(ee,JSON.stringify(this._chain.toJSON())),r?.(t)}getIdentity(){return this._identity}async isAuthenticated(){return!this.getIdentity().getPrincipal().isAnonymous()&&this._chain!==null}async login(t){var r,n,u,d;const y=BigInt(8)*BigInt(36e11),c=new URL(((r=t?.identityProvider)===null||r===void 0?void 0:r.toString())||uu);c.hash=cu,(n=this._idpWindow)===null||n===void 0||n.close(),this._removeEventListener(),this._eventHandler=this._getEventHandler(c,Object.assign({maxTimeToLive:(u=t?.maxTimeToLive)!==null&&u!==void 0?u:y},t)),window.addEventListener("message",this._eventHandler),this._idpWindow=(d=window.open(c.toString(),"idpWindow",t?.windowOpenerFeatures))!==null&&d!==void 0?d:void 0;const b=()=>{this._idpWindow&&(this._idpWindow.closed?this._handleFailure(hu,t?.onError):setTimeout(b,fu))};b()}_getEventHandler(t,r){return async n=>{var u,d,y;if(n.origin!==t.origin)return;const c=n.data;switch(c.kind){case"authorize-ready":{const b=Object.assign({kind:"authorize-client",sessionPublicKey:new Uint8Array((u=this._key)===null||u===void 0?void 0:u.getPublicKey().toDer()),maxTimeToLive:r?.maxTimeToLive,allowPinAuthentication:r?.allowPinAuthentication,derivationOrigin:(d=r?.derivationOrigin)===null||d===void 0?void 0:d.toString()},r?.customValues);(y=this._idpWindow)===null||y===void 0||y.postMessage(b,t.origin);break}case"authorize-client-success":try{await this._handleSuccess(c,r?.onSuccess)}catch(b){this._handleFailure(b.message,r?.onError)}break;case"authorize-client-failure":this._handleFailure(c.text,r?.onError);break}}}_handleFailure(t,r){var n;(n=this._idpWindow)===null||n===void 0||n.close(),r?.(t),this._removeEventListener(),delete this._idpWindow}_removeEventListener(){this._eventHandler&&window.removeEventListener("message",this._eventHandler),this._eventHandler=void 0}async logout(t={}){if(await wn(this._storage),this._identity=new ri,this._chain=null,t.returnTo)try{window.history.pushState({},"",t.returnTo)}catch{window.location.href=t.returnTo}}}async function wn(e){await e.remove(le),await e.remove(ee),await e.remove(su)}const du=()=>lu.create({idleOptions:{disableIdle:!0,disableDefaultIdleCallback:!0}});onmessage=({data:e})=>{const{msg:t}=e;switch(t){case"startIdleTimer":pu();return;case"stopIdleTimer":fs();return}};let lr;const pu=()=>lr=setInterval(async()=>await wu(),hs),fs=()=>{lr&&(clearInterval(lr),lr=void 0)},wu=async()=>{const[e,t]=await Promise.all([yu(),gu()]);if(e&&t.valid&&t.delegation!==null){mu(t.delegation);return}xu()},yu=async()=>(await du()).isAuthenticated(),gu=async()=>{const t=await new cs().get(ee),r=t!==null?$e.fromJSON(t):null;return{valid:r!==null&&Zi(r),delegation:r}},xu=()=>{fs(),postMessage({msg:"signOutIdleTimer"})},mu=e=>{const t=e.delegations[0]?.delegation.expiration;if(t===void 0)return;const r=new Date(Number(t/BigInt(1e6))).getTime()-Date.now();postMessage({msg:"delegationRemainingTime",data:{authRemainingTime:r}})}})();
